<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plataforma 7.0 ‚Äì Panel demostraci√≥n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    a { color: inherit; text-decoration: none; }
    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 1.2rem 1.5rem 0.8rem;
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: .6rem;
    }
    .logo-icon {
      width: 38px;
      height: 38px;
      border-radius: 999px;
      background: linear-gradient(135deg, #22c55e, #38bdf8);
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #0f172a;
      font-size: .85rem;
    }
    .logo-text small {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .12em;
      color: #9ca3af;
    }
    .logo-text span {
      font-size: 1rem;
      font-weight: 600;
    }
    .header-actions {
      display: flex;
      gap: .5rem;
      flex-wrap: wrap;
    }
    .chip {
      font-size: .7rem;
      padding: .25rem .7rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      color: #9ca3af;
    }
    .btn-mini {
      font-size: .75rem;
      padding: .3rem .75rem;
      border-radius: .75rem;
      border: 1px solid #1f2937;
      background: #0b1120;
      cursor: pointer;
    }
    main {
      flex: 1;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1.5rem 2rem;
    }
    .page-title {
      margin-bottom: .8rem;
    }
    .page-title h1 {
      font-size: 1.4rem;
      margin-bottom: .2rem;
    }
    .page-title p {
      font-size: .85rem;
      color: #9ca3af;
    }
    .tabs {
      display: flex;
      gap: .4rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    .tab {
      font-size: .8rem;
      padding: .45rem .9rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      cursor: pointer;
      color: #cbd5f5;
    }
    .tab.active {
      background: #22c55e;
      color: #022c22;
      border-color: #22c55e;
      font-weight: 600;
    }
    .grid {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 2fr);
      gap: 1.5rem;
    }
    @media (max-width: 860px) {
      .grid { grid-template-columns: minmax(0, 1fr); }
    }
    .card {
      background: #020617;
      border-radius: 1rem;
      border: 1px solid #1f2937;
      padding: 1rem 1rem 1.1rem;
      box-shadow: 0 18px 40px -30px rgb(15 23 42 / 0.95);
    }
    .card h2 {
      font-size: 1rem;
      margin-bottom: .25rem;
    }
    .card p {
      font-size: .85rem;
      color: #9ca3af;
      margin-bottom: .6rem;
    }
    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: .4rem;
      margin-bottom: .7rem;
    }
    .badge {
      font-size: .7rem;
      padding: .25rem .6rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #0b1120;
      color: #cbd5f5;
    }
    .section-title {
      font-size: .85rem;
      font-weight: 600;
      margin: .8rem 0 .4rem;
    }

    /* Acciones activadas (burbuja verde) */
    .owner-actions-list {
      list-style: none;
      margin: .25rem 0 .4rem;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: .25rem;
    }
    .owner-pill {
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      border-radius: 999px;
      padding: .25rem .55rem;
      border: 1px solid #1f2937;
      background: #020617;
      font-size: .78rem;
      color: #e5e7eb;
    }
    .owner-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
    }

    .hint {
      font-size: .75rem;
      color: #9ca3af;
      margin-top: .4rem;
    }

    /* Caja subida docs/fotos */
    .upload-box {
      margin-top: .6rem;
      border-radius: .9rem;
      border: 1px solid #1f2937;
      background: #020617;
      padding: .7rem .7rem .6rem;
    }
    .upload-cols {
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: .5rem;
    }
    @media (max-width: 700px) {
      .upload-cols { grid-template-columns: minmax(0,1fr); }
    }
    .upload-col-title {
      font-size: .78rem;
      font-weight: 500;
      margin-bottom: .2rem;
    }
    .upload-drop {
      border-radius: .7rem;
      border: 1px dashed #334155;
      padding: .5rem .6rem;
      font-size: .75rem;
      color: #9ca3af;
      text-align: center;
    }
    .upload-btn-row {
      margin-top: .5rem;
      display: flex;
      flex-wrap: wrap;
      gap: .4rem;
    }
    .btn-sm {
      font-size: .75rem;
      padding: .3rem .6rem;
      border-radius: .7rem;
      border: 1px solid #1f2937;
      background: #0b1120;
      color: #e5e7eb;
      cursor: pointer;
    }
    .file-lists {
      margin-top: .45rem;
      display: flex;
      flex-direction: column;
      gap: .25rem;
      font-size: .75rem;
      color: #9ca3af;
    }
    .file-list {
      display: none;
      margin-top: .25rem;
      border-radius: .5rem;
      border: 1px dashed #1f2937;
      padding: .35rem .45rem;
      max-height: 90px;
      overflow-y: auto;
    }

    /* Servicios disponibles ‚Äì header + filtros */
    .services-header {
      margin-top: .9rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
    }
    .services-header-title {
      font-size: .85rem;
      font-weight: 600;
    }
    .range-filters {
      display: flex;
      flex-wrap: wrap;
      gap: .25rem;
      font-size: .7rem;
    }
    .range-btn {
      padding: .2rem .5rem;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #9ca3af;
      cursor: pointer;
    }
    .range-btn.active {
      border-color: #38bdf8;
      color: #e0f2fe;
      background: #0b1120;
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: .6rem;
      margin-top: .4rem;
    }
    .service-item {
      font-size: .8rem;
      border-radius: .8rem;
      border: 1px solid #1f2937;
      background: #020617;
      padding: .55rem .6rem;
      display: flex;
      flex-direction: column;
      gap: .1rem;
    }
    .service-item strong {
      font-size: .82rem;
    }
    .service-meta {
      font-size: .7rem;
      color: #9ca3af;
    }
    .service-btn {
      margin-top:.4rem;
      padding:.35rem .7rem;
      border-radius:.6rem;
      border:1px solid #1f2937;
      background:#0b1120;
      color:#e5e7eb;
      font-size:.75rem;
      cursor:pointer;
      align-self:flex-start;
    }

    /* Bot√≥n dorado full acciones */
    .service-btn-full {
      margin-top:.35rem;
      padding:.35rem .9rem;
      border-radius:.7rem;
      border:1px solid #fbbf24;
      background: radial-gradient(circle at top, #facc15, #b45309);
      color:#022c22;
      font-size:.78rem;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      cursor:pointer;
    }
    .service-btn-full span.crown {
      font-size:.9rem;
    }
    .service-btn-full.off {
      background: transparent;
      color:#facc15;
      border-color:#facc15;
    }

    /* Caja de costes */
    .cost-box {
      margin-top:1rem;
      border-radius:.9rem;
      border:1px solid #1f2937;
      background: radial-gradient(circle at top left, rgba(250,204,21,0.16), rgba(15,23,42,0.96));
      padding:.75rem .8rem;
      font-size:.8rem;
    }
    .cost-row {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.5rem;
      margin-bottom:.25rem;
    }
    .cost-label {
      color:#e5e7eb;
    }
    .cost-num {
      font-weight:500;
      color:#e5e7eb;
    }
    .cost-value {
      font-size:.95rem;
      font-weight:700;
      color:#facc15;
    }
    .cost-row-strong {
      margin-top:.4rem;
      padding-top:.3rem;
      border-top:1px solid #1f2937;
    }
    .cost-note {
      font-size:.75rem;
      color:#9ca3af;
      margin-top:.35rem;
    }
    .cost-note strong {
      color:#facc15;
    }

    .kpis {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: .6rem;
      margin-top: .6rem;
    }
    .kpi {
      border-radius: .8rem;
      border: 1px solid #1f2937;
      background: #020617;
      padding: .55rem .6rem;
    }
    .kpi label {
      display: block;
      font-size: .7rem;
      color: #9ca3af;
      margin-bottom: .1rem;
    }
    .kpi span {
      font-size: .9rem;
      font-weight: 600;
    }
    .log {
      font-size: .78rem;
      margin-top: .6rem;
      max-height: 190px;
      overflow-y: auto;
      border-radius: .7rem;
      border: 1px dashed #1f2937;
      padding: .5rem .6rem;
      background: #020617;
    }
    .log-entry {
      margin-bottom: .25rem;
      color: #9ca3af;
    }
    .log-entry strong { color: #e5e7eb; }

    footer {
      font-size: .7rem;
      color: #6b7280;
      padding: .75rem 1.5rem 1.3rem;
      max-width: 1100px;
      margin: 0 auto;
    }
    .agency-actions {
      margin-top: .8rem;
      border-top: 1px solid #1f2937;
      padding-top: .6rem;
    }
    .agency-actions p {
      margin-bottom: .4rem;
      font-size:.8rem;
      color:#9ca3af;
    }
    .agency-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(170px,1fr));
      gap:.5rem;
    }
    .agency-btn {
      margin-top:.35rem;
      font-size:.72rem;
      padding:.3rem .6rem;
      border-radius:.6rem;
      border:1px solid #1d4ed8;
      background:#020617;
      color:#bfdbfe;
      cursor:pointer;
    }
    .agency-btn:disabled {
      opacity:.7;
      cursor:default;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="logo">
        <div class="logo-icon">7.0</div>
        <div class="logo-text">
          <small>Panel demostraci√≥n</small>
          <span>Plataforma 7.0</span>
        </div>
      </div>
      <div class="header-actions">
        <a href="index.html" class="btn-mini">‚Üê Volver a la p√°gina principal</a>
        <span class="chip">Prototipo visual ¬∑ sin datos reales de servidor</span>
      </div>
    </header>

    <main>
      <div class="page-title">
        <h1>Panel central de Plataforma 7.0</h1>
        <p>Vista simulada de c√≥mo se organiza la informaci√≥n para propietarios, agencias, difusores y auditor√≠a.</p>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="propietario">Propietario</button>
        <button class="tab" data-tab="agencia">Agencia / Profesional</button>
        <button class="tab" data-tab="difusor">Difusores / Creadores</button>
        <button class="tab" data-tab="auditor">Auditor√≠a</button>
      </div>

      <div class="grid">
        <!-- PANEL PROPIETARIO -->
        <section id="panel-propietario" class="panel">
          <div class="card">
            <h2>Propietario ‚Äì √Åtico Blue Sunset</h2>
            <p>Resumen de la campa√±a de venta de una vivienda real dentro del sistema 7.0.</p>

            <div class="badge-row">
              <span class="badge">2 dorm ¬∑ 2 ba√±os</span>
              <span class="badge">Vistas al mar</span>
              <span class="badge">La Duquesa ¬∑ Manilva</span>
              <span class="badge">Campa√±a activa</span>
            </div>

            <!-- Acciones activadas din√°micas -->
            <div class="section-title">Acciones activadas por el propietario</div>
            <p class="hint" id="owner-actions-empty">
              Todav√≠a no has activado ning√∫n servicio. Activa uno y aparecer√° aqu√≠.
            </p>
            <ul class="owner-actions-list" id="owner-actions-list"></ul>

            <!-- Caja subir documentaci√≥n / fotos -->
            <div class="upload-box">
              <div class="upload-cols">
                <div>
                  <div class="upload-col-title">Subir documentaci√≥n</div>
                  <div class="upload-drop">
                    Arrastra aqu√≠ tus documentos (PDF, contratos, escrituras)<br>
                    o pulsa el bot√≥n para seleccionarlos.
                  </div>
                </div>
                <div>
                  <div class="upload-col-title">Subir fotos</div>
                  <div class="upload-drop">
                    Arrastra aqu√≠ tus fotos (JPG, PNG)<br>
                    o pulsa el bot√≥n para seleccionarlas.
                  </div>
                </div>
              </div>

              <div class="upload-btn-row">
                <button class="btn-sm" id="upload-docs">Seleccionar documentaci√≥n</button>
                <button class="btn-sm" id="upload-fotos">Seleccionar fotos</button>
                <button class="btn-sm" id="btn-ver-docs">Ver documentaci√≥n subida</button>
                <button class="btn-sm" id="btn-ver-fotos">Ver fotos subidas</button>
              </div>

              <div class="file-lists">
                <div id="list-docs" class="file-list"></div>
                <div id="list-fotos" class="file-list"></div>
              </div>

              <input type="file" id="input-docs" multiple style="display:none" />
              <input type="file" id="input-fotos" multiple style="display:none" />
            </div>

            <!-- Servicios disponibles + filtros -->
            <div class="services-header">
              <span class="services-header-title">Servicios disponibles (tarifas ejemplo)</span>
              <div class="range-filters">
                <button class="range-btn active" data-range="all">Todos</button>
                <button class="range-btn" data-range="1-4">1‚Äì4</button>
                <button class="range-btn" data-range="5-8">5‚Äì8</button>
                <button class="range-btn" data-range="9-12">9‚Äì12</button>
                <button class="range-btn" data-range="13-16">13‚Äì16</button>
              </div>
            </div>

            <div class="services-grid" id="services-container">
              <!-- Aqu√≠ se pintan los servicios por JS -->
            </div>

            <!-- Caja de costes -->
            <div class="cost-box">
              <div class="cost-row">
                <span class="cost-label">Precio de la propiedad</span>
                <span class="cost-value" id="precio-prop">0,00 ‚Ç¨</span>
              </div>
              <div class="cost-row">
                <span class="cost-label">Total servicios activados (sin IVA)</span>
                <span class="cost-num" id="serv-sin-iva">0,00 ‚Ç¨</span>
              </div>
              <div class="cost-row">
                <span class="cost-label">IVA servicios 21 %</span>
                <span class="cost-num" id="iva-serv">0,00 ‚Ç¨</span>
              </div>
              <div class="cost-row">
                <span class="cost-label">Comisi√≥n 3 % gesti√≥n 7.0 (sin IVA)</span>
                <span class="cost-num" id="comision">0,00 ‚Ç¨</span>
              </div>
              <div class="cost-row">
                <span class="cost-label">IVA 21 % comisi√≥n</span>
                <span class="cost-num" id="iva-comision">0,00 ‚Ç¨</span>
              </div>
              <div class="cost-row cost-row-strong">
                <span class="cost-label">Neto para el propietario (antes de plusval√≠a)</span>
                <span class="cost-value" id="neto">0,00 ‚Ç¨</span>
              </div>
              <p class="cost-note">
                C√°lculo orientativo en formato Espa√±a. Incluye servicios activados + comisi√≥n est√°ndar del 3 % con su IVA.
                No incluye plusval√≠a municipal, IRPF u otros impuestos.
              </p>
            </div>

            <p class="hint">
              El propietario ve esto como ‚Äúpanel de mando‚Äù: qu√© est√° activo, qu√© falta por activar y qu√© servicios ya han sido realizados.
            </p>
          </div>
        </section>

        <!-- PANEL AGENCIA -->
        <section id="panel-agencia" class="panel" style="display:none;">
          <div class="card">
            <h2>Agencia 7.0 ‚Äì Centro de producci√≥n</h2>
            <p>Vista para agencias que dejan de vivir de exclusivas vac√≠as y pasan a producir resultados.</p>

            <div class="badge-row">
              <span class="badge">Equipo 7.0 Activo</span>
              <span class="badge">Comercial aut√≥nomo</span>
              <span class="badge">Abogado interno</span>
              <span class="badge">Valorador profesional</span>
            </div>

            <div class="section-title">Servicios que ofrece la agencia dentro de la plataforma</div>
            <ul class="owner-actions-list">
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Acompa√±amiento a visitas cualificadas</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Valoraciones profesionales con informe</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Gesti√≥n de contenido audiovisual</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Coordinaci√≥n legal y comercial</span></li>
            </ul>

            <div class="agency-actions">
              <p>Ejemplo de c√≥mo los profesionales marcan aqu√≠ cu√°ndo han completado su trabajo:</p>
              <div class="agency-grid">
                <div>
                  <strong>Fot√≥grafo</strong>
                  <div class="service-meta">Fotos PRO</div>
                  <button class="agency-btn">Marcar fotos como entregadas</button>
                </div>
                <div>
                  <strong>Vide√≥grafo / dron</strong>
                  <div class="service-meta">V√≠deo + dron</div>
                  <button class="agency-btn">Marcar v√≠deo como entregado</button>
                </div>
                <div>
                  <strong>Interiorista</strong>
                  <div class="service-meta">Home staging</div>
                  <button class="agency-btn">Marcar staging realizado</button>
                </div>
                <div>
                  <strong>Blogger internacional</strong>
                  <div class="service-meta">Publicaci√≥n historia</div>
                  <button class="agency-btn">Marcar post publicado</button>
                </div>
                <div>
                  <strong>Abogado</strong>
                  <div class="service-meta">Revisi√≥n legal</div>
                  <button class="agency-btn">Marcar informe entregado</button>
                </div>
              </div>
            </div>

            <div class="kpis">
              <div class="kpi">
                <label>Propiedades activas</label>
                <span>12</span>
              </div>
              <div class="kpi">
                <label>Visitas esta semana</label>
                <span>24</span>
              </div>
              <div class="kpi">
                <label>Ventas cerradas mes</label>
                <span>3</span>
              </div>
              <div class="kpi">
                <label>Honorarios a cobrar</label>
                <span>18.500 ‚Ç¨</span>
              </div>
            </div>

            <p class="hint">
              La agencia ve el sistema como una f√°brica de resultados: menos escaparate, m√°s contenido, m√°s foco en servicios realizados y cierres reales.
            </p>
          </div>
        </section>

        <!-- PANEL DIFUSOR -->
        <section id="panel-difusor" class="panel" style="display:none;">
          <div class="card">
            <h2>Difusores y creadores</h2>
            <p>Personas que no son agentes, pero tienen audiencia y pueden ayudar a vender compartiendo historias reales.</p>

            <div class="badge-row">
              <span class="badge">Bloggers</span>
              <span class="badge">YouTubers</span>
              <span class="badge">Influencers</span>
              <span class="badge">Gente normal con redes</span>
            </div>

            <div class="section-title">C√≥mo funciona para un difusor</div>
            <ul class="owner-actions-list">
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Se registra como difusor en la plataforma.</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Comparte la vivienda en sus redes o comunidad.</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Su tr√°fico se mide: clics, interesados, visitas.</span></li>
              <li><span class="owner-pill"><span class="owner-pill-dot"></span>Cobra solo si su difusi√≥n contribuye a una venta real.</span></li>
            </ul>

            <div class="kpis">
              <div class="kpi">
                <label>Difusores activos</label>
                <span>14</span>
              </div>
              <div class="kpi">
                <label>Alcance estimado</label>
                <span>23.000</span>
              </div>
              <div class="kpi">
                <label>Viviendas con difusi√≥n 7.0</label>
                <span>8</span>
              </div>
            </div>

            <p class="hint">
              Todo el sistema est√° pensado para repartir valor: si tu difusi√≥n ayuda a vender, cobras. Si no, nadie te cobra ni cobra.
            </p>
          </div>
        </section>

        <!-- PANEL AUDITOR -->
        <section id="panel-auditor" class="panel" style="display:none;">
          <div class="card">
            <h2>Auditor√≠a 7.0</h2>
            <p>Una visi√≥n simple de c√≥mo se podr√≠a registrar qui√©n participa, qu√© se activa y qu√© se paga al cierre.</p>

            <div class="badge-row">
              <span class="badge">Registro de acciones</span>
              <span class="badge">Transparencia</span>
              <span class="badge">Preparado para notar√≠a</span>
            </div>

            <div class="kpis">
              <div class="kpi">
                <label>Acciones registradas</label>
                <span>32</span>
              </div>
              <div class="kpi">
                <label>Profesionales implicados</label>
                <span>9</span>
              </div>
              <div class="kpi">
                <label>Difusores con impacto</label>
                <span>4</span>
              </div>
              <div class="kpi">
                <label>Importe a repartir</label>
                <span>12.300 ‚Ç¨</span>
              </div>
            </div>

            <div class="section-title">Ejemplo de ‚Äúregistro‚Äù de la vivienda</div>
            <div class="log">
              <div class="log-entry"><strong>Propietario</strong> activa Fotos PRO (450 ‚Ç¨ a √©xito).</div>
              <div class="log-entry"><strong>Propietario</strong> activa V√≠deo + dron (450 ‚Ç¨ a √©xito).</div>
              <div class="log-entry"><strong>Agencia 7.0</strong> asigna comercial aut√≥nomo para visitas (50 ‚Ç¨/visita).</div>
              <div class="log-entry"><strong>Abogado</strong> registra revisi√≥n legal pendiente (250 ‚Ç¨ al cierre).</div>
              <div class="log-entry"><strong>Blogger FR</strong> publica historia sobre ‚Äú√°tico con vistas a √Åfrica‚Äù.</div>
              <div class="log-entry"><strong>Difusor local</strong> comparte la vivienda en grupos de la zona.</div>
              <div class="log-entry"><strong>Venta</strong>: se cierra operaci√≥n y se reparte el valor entre implicados.</div>
            </div>

            <p class="hint">
              En la versi√≥n completa, este panel se conectar√≠a a una base de datos y, si se quiere, a la notar√≠a para verificar que los pagos a √©xito quedan reflejados de forma justa.
            </p>
          </div>
        </section>
      </div>
    </main>

    <footer>
      Plataforma 7.0 ‚Äì Panel demostraci√≥n ¬∑ Esta p√°gina es un prototipo visual est√°tico pensado para explicar el sistema.
    </footer>
  </div>

  <script>
    /* TABS */
    const tabs = document.querySelectorAll('.tab');
    const panels = document.querySelectorAll('.panel');
    tabs.forEach(t => {
      t.addEventListener('click', () => {
        tabs.forEach(x => x.classList.remove('active'));
        t.classList.add('active');
        panels.forEach(p => {
          p.style.display = p.id === 'panel-' + t.dataset.tab ? '' : 'none';
        });
      });
    });

    /* SUBIDA FOTOS / DOCS */
    const inputDocs   = document.getElementById('input-docs');
    const inputFotos  = document.getElementById('input-fotos');
    const listDocs    = document.getElementById('list-docs');
    const listFotos   = document.getElementById('list-fotos');

    document.getElementById('upload-docs').addEventListener('click', () => inputDocs.click());
    document.getElementById('upload-fotos').addEventListener('click', () => inputFotos.click());

    function renderFileList(input, listEl) {
      listEl.innerHTML = '';
      Array.from(input.files).forEach(file => {
        const row = document.createElement('div');
        row.textContent = '‚Ä¢ ' + file.name;
        listEl.appendChild(row);
      });
    }

    inputDocs.addEventListener('change', () => renderFileList(inputDocs, listDocs));
    inputFotos.addEventListener('change', () => renderFileList(inputFotos, listFotos));

    document.getElementById('btn-ver-docs').addEventListener('click', () => {
      listDocs.style.display = listDocs.style.display === 'block' ? 'none' : 'block';
    });
    document.getElementById('btn-ver-fotos').addEventListener('click', () => {
      listFotos.style.display = listFotos.style.display === 'block' ? 'none' : 'block';
    });

    /* SERVICIOS */
    const servicios = [
      { id: "fotos",   name: "Fotos PRO",               price: 450,  desc: "Fot√≥grafo especializado inmobiliario.",              exito:true },
      { id: "video",   name: "V√≠deo + dron",           price: 450,  desc: "Recorrido interior + vistas a√©reas.",               exito:true },
      { id: "home",    name: "Home staging",           price: 900,  desc: "Mejora est√©tica sin reformas.",                     exito:false },
      { id: "blogger", name: "Blogger internacional",  price: 3000, desc: "Historia real publicada en otro pa√≠s.",            exito:true },
      { id: "legal",   name: "Revisi√≥n legal",         price: 250,  desc: "Abogado inmobiliario especializado.",               exito:false },
      { id: "visitas", name: "Acompa√±amiento a visitas", price: 50, desc: "Comercial 7.0 con informe.",                       exito:false },
      { id: "llamadas",name: "Atenci√≥n de llamadas",   price: 100,  desc: "Filtro de compradores.",                           exito:false },
      { id: "agenda",  name: "Gesti√≥n de agenda",      price: 120,  desc: "Coordinaci√≥n de visitas.",                         exito:false },
      { id: "informe", name: "Informe semanal",        price: 40,   desc: "Resumen y estrategia semanal.",                     exito:false },
      { id: "ads",     name: "Campa√±a redes sociales", price: 150,  desc: "Segmentaci√≥n internacional.",                      exito:false },
      { id: "red",     name: "Red difusores locales",  price: 1000, desc: "Comunidades y grupos locales.",                     exito:true },
      { id: "infl",    name: "Influencers extranjeros",price: 2500, desc: "Audiencias nicho internacionales.",                exito:true },
      { id: "tour",    name: "Tour virtual 3D",        price: 300,  desc: "Recorrido 360¬∫.",                                  exito:false },
      { id: "noct",    name: "Reportaje nocturno",     price: 120,  desc: "Fotos al atardecer / noche.",                      exito:false },
      { id: "copy",    name: "Copywriting premium",    price: 60,   desc: "Texto profesional y emocional.",                    exito:false },
      { id: "carta",   name: "Carta de venta",         price: 150,  desc: "PDF profesional para compradores.",                exito:false },
      { id: "valor",   name: "Valoraci√≥n profesional", price: 180,  desc: "Informe de precio con comparables.",               exito:false },
      { id: "valor2",  name: "Valoraci√≥n ampliada",    price: 240,  desc: "Escenarios de precio y plazos.",                   exito:false },
      { id: "fiscal",  name: "Informe fiscal",         price: 150,  desc: "C√°lculo de impuestos y neto.",                     exito:false },
      { id: "ener",    name: "Certificado energ√©tico", price: 70,   desc: "Certificado obligatorio gestionado.",              exito:false },
      { id: "plano",   name: "Plano profesional",      price: 120,  desc: "Plano 2D / 3D.",                                   exito:false },
      { id: "limpieza",name: "Limpieza profesional",   price: 90,   desc: "Antes de fotos y visitas.",                        exito:false },
      { id: "arreglos",name: "Peque√±os arreglos",      price: 200,  desc: "Manitas: detalles y reparaciones.",                exito:false },
      { id: "lavado",  name: "Lavado de cara expr√©s",  price: 450,  desc: "Pintura y mejora r√°pida.",                         exito:false },
      { id: "terraza", name: "Optimizaci√≥n de terraza",price: 300,  desc: "Mobiliario, textiles y plantas.",                  exito:false },
      { id: "reforma", name: "Reformas ligeras",       price: 800,  desc: "Cambios visuales con impacto.",                    exito:false },
      { id: "gestion", name: "Gesti√≥n total 7.0",      price: 0,    desc: "Coordinaci√≥n integral hasta Notar√≠a ‚Äì 3% a √©xito.",exito:true }
    ];

    const servicesContainer   = document.getElementById('services-container');
    const rangeButtons        = document.querySelectorAll('.range-btn');
    const ownerActionsList    = document.getElementById('owner-actions-list');
    const ownerActionsEmpty   = document.getElementById('owner-actions-empty');
    const precioPropEl        = document.getElementById('precio-prop');
    const servSinIvaEl        = document.getElementById('serv-sin-iva');
    const ivaServEl           = document.getElementById('iva-serv');
    const comisionEl          = document.getElementById('comision');
    const ivaComisionEl       = document.getElementById('iva-comision');
    const netoEl              = document.getElementById('neto');

    const precioPropiedad = 385000; // fijo por ahora, se puede hacer editable m√°s adelante
    let rangoActual = 'all';
    const activados = new Set();
    let fullOn = false;

    function formatearEUR(num) {
      return num.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ‚Ç¨';
    }

    function servicioEnRango(index) {
      const n = index + 1;
      if (rangoActual === 'all') return true;
      const [ini, fin] = rangoActual.split('-').map(Number);
      return n >= ini && n <= fin;
    }

    function renderServicios() {
      servicesContainer.innerHTML = '';

      servicios.forEach((s, idx) => {
        if (!servicioEnRango(idx)) return;

        const div = document.createElement('div');
        div.className = 'service-item';

        let extraButtons = '';
        if (s.id === 'gestion') {
          extraButtons = `
            <button class="service-btn-full ${fullOn ? '' : 'off'}" id="btn-full-acciones">
              <span class="crown">üëë</span>
              ${fullOn ? 'Desactivar full acciones 7.0' : 'Full acciones 7.0'}
            </button>
          `;
        }

        const activo = activados.has(s.id);

        div.innerHTML = `
          <strong>${s.name}</strong>
          <div class="service-meta">${s.price} ‚Ç¨ ¬∑ ${s.exito ? 'pago a √©xito' : 'servicio puntual'}</div>
          <div class="service-meta">${s.desc}</div>
          <button class="service-btn" data-id="${s.id}">
            ${activo ? 'Desactivar servicio' : 'Activar este servicio'}
          </button>
          ${extraButtons}
        `;

        servicesContainer.appendChild(div);
      });
    }

    /* Actualizar lista de acciones activadas */
    function actualizarAccionesPropietario() {
      ownerActionsList.innerHTML = '';

      if (activados.size === 0) {
        ownerActionsEmpty.style.display = 'block';
        return;
      }
      ownerActionsEmpty.style.display = 'none';

      activados.forEach(id => {
        const s = servicios.find(x => x.id === id);
        if (!s) return;
        const li = document.createElement('li');
        li.innerHTML = `
          <span class="owner-pill">
            <span class="owner-pill-dot"></span>
            ${s.name} activado por el propietario
          </span>
        `;
        ownerActionsList.appendChild(li);
      });
    }

    /* C√°lculo financiero real */
    function recalcularFinanzas() {
      const subtotalServicios = Array.from(activados)
        .map(id => servicios.find(s => s.id === id))
        .filter(Boolean)
        .reduce((sum, s) => sum + (s.price || 0), 0);

      const ivaServicios = subtotalServicios * 0.21;
      const comision = precioPropiedad * 0.03;
      const ivaComision = comision * 0.21;

      const neto = precioPropiedad - subtotalServicios - ivaServicios - comision - ivaComision;

      precioPropEl.textContent   = formatearEUR(precioPropiedad);
      servSinIvaEl.textContent   = formatearEUR(subtotalServicios);
      ivaServEl.textContent      = formatearEUR(ivaServicios);
      comisionEl.textContent     = formatearEUR(comision);
      ivaComisionEl.textContent  = formatearEUR(ivaComision);
      netoEl.textContent         = formatearEUR(neto);
    }

    /* Eventos filtros rango */
    rangeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        rangeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        rangoActual = btn.dataset.range;
        renderServicios();
      });
    });

    /* Click en servicios (delegaci√≥n) */
    servicesContainer.addEventListener('click', (e) => {
      const btn = e.target;

      // Bot√≥n servicio individual
      if (btn.classList.contains('service-btn')) {
        const id = btn.dataset.id;
        if (activados.has(id)) {
          activados.delete(id);
        } else {
          activados.add(id);
        }
        actualizarAccionesPropietario();
        recalcularFinanzas();
        renderServicios();
      }

      // Bot√≥n FULL acciones
      if (btn.id === 'btn-full-acciones') {
        fullOn = !fullOn;
        if (fullOn) {
          servicios.forEach(s => activados.add(s.id));
        } else {
          activados.clear();
        }
        actualizarAccionesPropietario();
        recalcularFinanzas();
        renderServicios();
      }
    });

    // Render inicial
    renderServicios();
    actualizarAccionesPropietario();
    recalcularFinanzas();
  </script>
</body>
</html>
