<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plataforma 7.0 ‚Äì Panel demostraci√≥n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    a { color: inherit; text-decoration: none; }
    .page { min-height: 100vh; display:flex; flex-direction:column; }

    header {
      padding: 1.2rem 1.5rem .8rem;
      max-width: 1100px;
      margin: 0 auto;
      display:flex; justify-content:space-between; align-items:center; gap:1rem;
    }

    .logo { display:flex; align-items:center; gap:.6rem; }
    .logo-icon {
      width:38px; height:38px; border-radius:999px;
      background:linear-gradient(135deg,#22c55e,#38bdf8);
      display:grid; place-items:center; font-weight:700;
      color:#0f172a; font-size:.85rem;
    }
    .logo-text small {
      font-size:.7rem; text-transform:uppercase;
      letter-spacing:.12em; color:#9ca3af;
    }
    .logo-text span { font-size:1rem; font-weight:600; }

    .header-actions { display:flex; gap:.5rem; flex-wrap:wrap; }
    .btn-mini {
      font-size:.75rem; padding:.3rem .75rem; border-radius:.75rem;
      border:1px solid #1f2937; background:#0b1120; cursor:pointer;
    }
    .chip { font-size:.7rem; padding:.25rem .7rem; border-radius:999px; border:1px solid #1f2937; color:#9ca3af; }

    main {
      flex:1; max-width:1100px; margin:0 auto; padding:0 1.5rem 2rem;
    }

    .page-title h1 { font-size:1.45rem; margin-bottom:.2rem; }
    .page-title p { font-size:.85rem; color:#9ca3af; }

    .tabs { display:flex; gap:.4rem; margin:.8rem 0 1rem; flex-wrap:wrap; }
    .tab {
      font-size:.8rem; padding:.45rem .9rem; border-radius:999px;
      border:1px solid #1f2937; background:#020617; cursor:pointer;
      color:#cbd5f5;
    }
    .tab.active { background:#22c55e; color:#022c22; border-color:#22c55e; font-weight:600; }

    .grid { display:grid; grid-template-columns:minmax(0,2.1fr) minmax(0,2fr); gap:1.5rem; }
    @media(max-width:860px){ .grid{ grid-template-columns:1fr;} }

    .card {
      background:#020617; border-radius:1rem; border:1px solid #1f2937;
      padding:1rem 1rem 1.2rem;
      box-shadow:0 18px 40px -30px rgb(15 23 42 / .95);
    }

    h2 { font-size:1.1rem; margin-bottom:.35rem; }
    .section-title { margin-top:1rem; margin-bottom:.4rem; font-size:.88rem; font-weight:600; }

    /* LISTAS */
    ul.list { list-style:none; padding-left:0; margin:0 0 .9rem; }
    ul.list li { font-size:.85rem; color:#e5e7eb; margin-bottom:.25rem; }
    ul.list li::before {
      content:"‚Ä¢ "; color:#22c55e;
    }

    /* BADGES */
    .badge-row { display:flex; flex-wrap:wrap; gap:.4rem; margin:.4rem 0 .9rem; }
    .badge {
      font-size:.75rem; padding:.25rem .6rem;
      border-radius:999px; border:1px solid #1f2937;
      background:#0b1120; color:#cbd5f5;
    }

    /* NUEVOS BLOQUES SUBIR ARCHIVOS */
    .upload-boxes {
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:1rem;
      margin-bottom:1rem;
    }
    @media(max-width:700px){ .upload-boxes{ grid-template-columns:1fr;} }

    .upload-box {
      border:2px dashed #334155;
      border-radius:1rem;
      padding:1.2rem;
      text-align:center;
      background:#0b1120;
      cursor:pointer;
      transition:.2s;
    }
    .upload-box:hover { border-color:#38bdf8; }

    .upload-box-title { font-size:.9rem; font-weight:600; margin-bottom:.4rem; }
    .upload-box small { font-size:.7rem; color:#94a3b8; }

    .btn-view {
      margin-top:.4rem;
      padding:.4rem .8rem;
      border-radius:.6rem;
      border:1px solid #1d4ed8;
      background:#0b1120;
      color:#bfdbfe;
      cursor:pointer;
      font-size:.75rem;
    }

    .file-list {
      margin-top:.6rem;
      padding:.5rem .7rem;
      border-radius:.6rem;
      border:1px solid #1f2937;
      background:#0b1120;
      font-size:.78rem;
      color:#cbd5f5;
      display:none;
    }
    .file-list-item { margin-bottom:.2rem; color:#fff; }
    /* SERVICIOS */
    .services-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:1rem;
      margin-top:.5rem;
    }
    .service-card {
      border:1px solid #1f2937;
      background:#0b1120;
      border-radius:1rem;
      padding:1rem;
    }
    .service-card strong { font-size:1rem; }
    .service-meta { font-size:.8rem; color:#9ca3af; margin-bottom:.4rem; }

    .service-btn {
      margin-top:.5rem;
      padding:.5rem .9rem;
      border-radius:.7rem;
      border:1px solid #334155;
      background:#0f172a;
      color:#e5e7eb;
      cursor:pointer;
      font-size:.8rem;
    }
    .service-btn-gold {
      background:linear-gradient(135deg,#facc15,#b45309);
      border-color:#eab308;
      color:#0f172a;
      font-weight:700;
      display:flex;
      align-items:center;
      gap:.4rem;
    }

    /* FULL ACCIONES */
    .service-btn-full {
      margin-top:.5rem;
      padding:.6rem 1rem;
      border-radius:.8rem;
      background:linear-gradient(135deg,#facc15,#92400e);
      border:1px solid #fbbf24;
      color:#0f172a;
      font-weight:700;
      cursor:pointer;
      font-size:.9rem;
      display:inline-flex;
      align-items:center;
      gap:.4rem;
    }

    /* CAJA FINANCIERA */
    .finance-box {
      margin-top:1.4rem;
      padding:1rem;
      border-radius:1rem;
      border:1px solid #1f2937;
      background:radial-gradient(circle at top left,rgba(250,204,21,0.18),rgba(15,23,42,0.92));
    }
    .finance-row {
      display:flex;
      justify-content:space-between;
      margin-bottom:.4rem;
      font-size:.85rem;
    }
    .finance-label { color:#cbd5e1; }
    .finance-value { color:#facc15; font-weight:700; }

  </style>
</head>

<body>
<div class="page">

<header>
  <div class="logo">
    <div class="logo-icon">7.0</div>
    <div class="logo-text">
      <small>Panel demostraci√≥n</small>
      <span>Plataforma 7.0</span>
    </div>
  </div>
  <div class="header-actions">
    <a href="index.html" class="btn-mini">‚Üê Volver</a>
    <span class="chip">Prototipo visual</span>
  </div>
</header>

<main>
  <div class="page-title">
    <h1>Panel central de Plataforma 7.0</h1>
    <p>Gesti√≥n completa para propietarios, agencias y difusores.</p>
  </div>

  <!-- TABS -->
  <div class="tabs">
    <button class="tab active" data-tab="propietario">Propietario</button>
    <button class="tab" data-tab="agencia">Agencia</button>
    <button class="tab" data-tab="difusor">Difusor</button>
    <button class="tab" data-tab="auditor">Auditor√≠a</button>
  </div>

  <div class="grid">

    <!-- PANEL PROPIETARIO -->
    <section id="panel-propietario" class="panel">

      <div class="card">
        <h2>Propietario ‚Äì √Åtico Blue Sunset</h2>
        <p>Gesti√≥n completa de la campa√±a de venta.</p>

        <!-- BADGES -->
        <div class="badge-row">
          <span class="badge">2 dorm ¬∑ 2 ba√±os</span>
          <span class="badge">Vistas al mar</span>
          <span class="badge">La Duquesa ¬∑ Manilva</span>
          <span class="badge">Campa√±a activa</span>
        </div>

        <!-- SUBIDA ARCHIVOS -->
        <div class="section-title">Acciones iniciales</div>

        <div class="upload-boxes">

          <!-- SUBIR FOTOS -->
          <div class="upload-box" id="upload-fotos">
            <div class="upload-box-title">üì∑ Subir fotos</div>
            <small>Arrastra o haz clic aqu√≠</small>
            <input type="file" id="input-fotos" accept="image/*" multiple hidden />
          </div>

          <!-- SUBIR DOCUMENTOS -->
          <div class="upload-box" id="upload-docs">
            <div class="upload-box-title">üìÑ Subir documentaci√≥n</div>
            <small>PDF, Word, contratos, etc.</small>
            <input type="file" id="input-docs" accept=".pdf,.doc,.docx,.jpg,.png" multiple hidden />
          </div>
        </div>

        <!-- BOTONES VER ARCHIVOS -->
        <button class="btn-view" id="btn-ver-fotos">Ver fotos subidas</button>
        <div class="file-list" id="list-fotos"></div>

        <button class="btn-view" id="btn-ver-docs">Ver documentaci√≥n subida</button>
        <div class="file-list" id="list-docs"></div>

        <!-- LISTA DIN√ÅMICA DE SERVICIOS ACTIVADOS -->
        <div class="section-title">Acciones activadas por el propietario</div>
        <ul class="list" id="lista-activados">
          <!-- Se llenar√° autom√°ticamente -->
        </ul>

        <!-- SERVICIOS -->
        <div class="section-title">Servicios disponibles (tarifas ejemplo)</div>

        <div class="services-grid" id="services-container">
          <!-- Aqu√≠ se insertar√°n TODOS los servicios con JS -->
        </div>

        <!-- BOT√ìN FULL ACCIONES -->
        <button class="service-btn-full" id="btn-full">
          üëë Full acciones 7.0
        </button>

        <!-- CAJA FINANCIERA -->
        <div class="finance-box">
          <div class="finance-row">
            <span class="finance-label">Precio de la propiedad:</span>
            <span class="finance-value" id="precio-prop">385.000 ‚Ç¨</span>
          </div>

          <div class="finance-row">
            <span class="finance-label">Servicios activados (sin IVA):</span>
            <span class="finance-value" id="serv-sin-iva">0 ‚Ç¨</span>
          </div>

          <div class="finance-row">
            <span class="finance-label">IVA servicios (21 %):</span>
            <span class="finance-value" id="iva-serv">0 ‚Ç¨</span>
          </div>

          <div class="finance-row">
            <span class="finance-label">Comisi√≥n 3% gesti√≥n total:</span>
            <span class="finance-value" id="comision">0 ‚Ç¨</span>
          </div>

          <div class="finance-row">
            <span class="finance-label">IVA comisi√≥n (21 %):</span>
            <span class="finance-value" id="iva-comision">0 ‚Ç¨</span>
          </div>

          <div class="finance-row" style="margin-top:10px;">
            <span class="finance-label"><strong>Neto para propietario:</strong></span>
            <span class="finance-value" id="neto"><strong>0 ‚Ç¨</strong></span>
          </div>

          <small style="color:#94a3b8; font-size:.75rem; margin-top:.4rem; display:block;">
            Neto real (Espa√±a). Incluye servicios + IVA + comisi√≥n 3% + IVA comisi√≥n. No incluye plusval√≠a municipal.
          </small>
        </div>

      </div>
    </section>
<script>
/* ------------------------------
   TABS
------------------------------ */
const tabs = document.querySelectorAll('.tab');
const panels = document.querySelectorAll('.panel');

tabs.forEach(t => {
  t.addEventListener('click', () => {
    tabs.forEach(a => a.classList.remove('active'));
    t.classList.add('active');

    panels.forEach(p => {
      p.style.display = p.id === "panel-" + t.dataset.tab ? "" : "none";
    });
  });
});


/* ------------------------------
   SISTEMA DE ARCHIVOS
------------------------------ */
const fotosInput = document.getElementById("input-fotos");
const docsInput  = document.getElementById("input-docs");

const listaFotos = document.getElementById("list-fotos");
const listaDocs  = document.getElementById("list-docs");

document.getElementById("upload-fotos").addEventListener("click", () => fotosInput.click());
document.getElementById("upload-docs").addEventListener("click", () => docsInput.click());

function renderFiles(input, list) {
  list.innerHTML = "";
  [...input.files].forEach(file => {
    const div = document.createElement("div");
    div.textContent = "‚Ä¢ " + file.name;
    list.appendChild(div);
  });
}

fotosInput.addEventListener("change", () => renderFiles(fotosInput, listaFotos));
docsInput.addEventListener("change",  () => renderFiles(docsInput, listaDocs));

document.getElementById("btn-ver-fotos").addEventListener("click", () => {
  listaFotos.style.display = listaFotos.style.display === "block" ? "none" : "block";
});
document.getElementById("btn-ver-docs").addEventListener("click", () => {
  listaDocs.style.display = listaDocs.style.display === "block" ? "none" : "block";
});


/* ------------------------------
   SERVICIOS DISPONIBLES
------------------------------ */
const servicios = [
  { id: "fotos", name: "Fotos PRO", price: 450, desc: "Fot√≥grafo especializado inmobiliario.", exito:true },
  { id: "video", name: "V√≠deo + dron", price: 450, desc: "Recorrido interior + vistas a√©reas.", exito:true },
  { id: "home", name: "Home staging", price: 900, desc: "Mejora est√©tica sin reformas.", exito:false },
  { id: "blogger", name: "Blogger internacional", price: 3000, desc: "Historia real publicada en otro pa√≠s.", exito:true },
  { id: "legal", name: "Revisi√≥n legal", price: 250, desc: "Abogado inmobiliario.", exito:false },
  { id: "visitas", name: "Acompa√±amiento a visitas", price: 50, desc:"Comercial 7.0 con informe.", exito:false },
  { id: "llamadas", name:"Atenci√≥n de llamadas", price:100, desc:"Filtro de compradores.", exito:false },
  { id: "agenda", name:"Gesti√≥n de agenda", price:120, desc:"Coordinaci√≥n visitas.", exito:false },
  { id: "informe", name:"Informe semanal", price:40, desc:"Resumen y estrategia.", exito:false },
  { id: "ads", name:"Campa√±a redes sociales", price:150, desc:"Segmentaci√≥n internacional.", exito:false },
  { id: "red", name:"Red difusores locales", price:1000, desc:"Comunidades reales.", exito:true },
  { id: "infl", name:"Influencers extranjeros", price:2500, desc:"Audiencias nicho.", exito:true },
  { id: "tour", name:"Tour virtual 3D", price:300, desc:"Recorrido 360¬∫.", exito:false },
  { id: "nocturnas", name:"Reportaje nocturno", price:120, desc:"Fotos tarde-noche.", exito:false },
  { id: "copy", name:"Copywriting premium", price:60, desc:"Texto profesional.", exito:false },
  { id: "carta", name:"Carta de venta", price:150, desc:"PDF profesional.", exito:false },
  { id: "valor", name:"Valoraci√≥n profesional", price:180, desc:"Informe precio.", exito:false },
  { id: "valor2", name:"Valoraci√≥n ampliada", price:240, desc:"Escenarios precio.", exito:false },
  { id: "fiscal", name:"Informe fiscal", price:150, desc:"C√°lculo impuestos.", exito:false },
  { id: "ener", name:"Certificado energ√©tico", price:70, desc:"Certificado obligatorio.", exito:false },
  { id: "plano", name:"Plano profesional", price:120, desc:"Plano 2D/3D.", exito:false },
  { id: "limpieza", name:"Limpieza profesional", price:90, desc:"Antes de fotos y visitas.", exito:false },
  { id: "arreglos", name:"Peque√±os arreglos", price:200, desc:"Manitas.", exito:false },
  { id: "lavado", name:"Lavado de cara expr√©s", price:450, desc:"Pintura / mejora r√°pida.", exito:false },
  { id: "terraza", name:"Optimizaci√≥n terraza", price:300, desc:"Textiles y plantas.", exito:false },
  { id: "reforma", name:"Reformas ligeras", price:800, desc:"Cambios visuales.", exito:false },
];

let activados = [];
const listaActivados = document.getElementById("lista-activados");
const container = document.getElementById("services-container");


/* Render servicios */
function renderServicios() {
  container.innerHTML = "";
  servicios.forEach(s => {
    const div = document.createElement("div");
    div.className = "service-card";
    div.innerHTML = `
      <strong>${s.name}</strong>
      <div class="service-meta">${s.price} ‚Ç¨ ¬∑ ${s.exito ? "pago a √©xito" : "servicio puntual"}</div>
      <p>${s.desc}</p>
      <button class="service-btn" data-id="${s.id}">Activar este servicio</button>
    `;
    container.appendChild(div);
  });
}
renderServicios();


/* Activar servicios individuales */
container.addEventListener("click", e => {
  if (!e.target.matches(".service-btn")) return;

  const id = e.target.dataset.id;
  const servicio = servicios.find(s => s.id === id);

  if (!activados.includes(id)) activados.push(id);

  actualizarListaActivados();
  calcularFinanzas();
});


/* ------------------------------
   FULL ACCIONES (ACTIVA TODO)
------------------------------ */
document.getElementById("btn-full").addEventListener("click", () => {
  activados = servicios.map(s => s.id);
  actualizarListaActivados();
  calcularFinanzas();
});


/* ------------------------------
   LISTA DIN√ÅMICA ACTIVADOS
------------------------------ */
function actualizarListaActivados() {
  listaActivados.innerHTML = "";

  activados.forEach(id => {
    const s = servicios.find(x => x.id === id);
    const li = document.createElement("li");

    li.innerHTML = `
      <span style="color:#22c55e;">‚óè</span>
      ${s.name} activado
    `;
    listaActivados.appendChild(li);
  });
}


/* ------------------------------
   C√ÅLCULO FINANCIERO REAL
------------------------------ */
const precioProp = 385000; // valor fijo por ahora

function formatear(num) {
  return num.toLocaleString("es-ES", { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " ‚Ç¨";
}

function calcularFinanzas() {
  const subtotalServicios = activados
    .map(id => servicios.find(s => s.id === id).price)
    .reduce((a, b) => a + b, 0);

  const ivaServicios = subtotalServicios * 0.21;

  const comision = precioProp * 0.03;
  const ivaComision = comision * 0.21;

  const neto = precioProp - subtotalServicios - ivaServicios - comision - ivaComision;

  document.getElementById("precio-prop").textContent = formatear(precioProp);
  document.getElementById("serv-sin-iva").textContent = formatear(subtotalServicios);
  document.getElementById("iva-serv").textContent = formatear(ivaServicios);
  document.getElementById("comision").textContent = formatear(comision);
  document.getElementById("iva-comision").textContent = formatear(ivaComision);
  document.getElementById("neto").textContent = formatear(neto);
}

</script>

</body>
</html>
