<!DOCTYPE html>
<html lang="es">
<head>
Â  <meta charset="UTF-8" />
Â  <title>Panamove 7.0 â€“ Dashboard campaÃ±a</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <style>
Â  Â  :root {
Â  Â  Â  --bg-main: #020617;
Â  Â  Â  --bg-card: #0f172a;
Â  Â  Â  --bg-card-alt: #020617;
Â  Â  Â  --accent: #38bdf8;
Â  Â  Â  --accent-soft: rgba(56, 189, 248, 0.15);
Â  Â  Â  --accent-strong: #0ea5e9;
Â  Â  Â  --gold: #fbbf24;
Â  Â  Â  --text-main: #e2e8f0;
Â  Â  Â  --text-soft: #94a3b8;
Â  Â  Â  --border-subtle: #1e293b;
Â  Â  Â  --danger: #ef4444;
Â  Â  Â  --success: #22c55e;
Â  Â  Â  --radius-lg: 0.75rem;
Â  Â  Â  --radius-full: 9999px;
Â  Â  Â  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
Â  Â  Â  --shadow-pill: 0 0 0 1px rgba(148, 163, 184, 0.3);
Â  Â  Â  --transition-fast: 0.2s ease-out;
Â  Â  }

Â  Â  * {
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }

Â  Â  body {
Â  Â  Â  min-height: 100vh;
Â  Â  Â  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
Â  Â  Â  Â  sans-serif;
Â  Â  Â  background: radial-gradient(circle at top, var(--bg-main), #000000 75%);
Â  Â  Â  color: var(--text-main);
Â  Â  Â  display: flex;
Â  Â  }

Â  Â  a {
Â  Â  Â  color: inherit;
Â  Â  Â  text-decoration: none;
Â  Â  }
Â  Â  
Â  Â  button {
Â  Â  Â  border: none;
Â  Â  Â  background: none;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-family: inherit;
Â  Â  Â  color: inherit;
Â  Â  }

Â  Â  /* LAYOUT -------------------------------------------------------------- */

Â  Â  .page {
Â  Â  Â  display: flex;
Â  Â  Â  width: 100%;
Â  Â  Â  min-height: 100vh;
Â  Â  }

Â  Â  .sidebar {
Â  Â  Â  width: 230px;
Â  Â  Â  background: radial-gradient(circle at top left, var(--bg-card), var(--bg-main) 55%);
Â  Â  Â  border-right: 1px solid var(--border-subtle);
Â  Â  Â  padding: 1.5rem 1.3rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 1.5rem;
Â  Â  }

Â  Â  .brand {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.8rem;
Â  Â  }

Â  Â  .brand-logo {
Â  Â  Â  width: 32px;
Â  Â  Â  height: 32px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: conic-gradient(
Â  Â  Â  Â  from 160deg,
Â  Â  Â  Â  #22c55e,
Â  Â  Â  Â  #22d3ee,
Â  Â  Â  Â  #a855f7,
Â  Â  Â  Â  #22c55e
Â  Â  Â  );
Â  Â  Â  box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.8);
Â  Â  }

Â  Â  .brand-title {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.1rem;
Â  Â  }

Â  Â  .brand-title strong {
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  letter-spacing: 0.04em;
Â  Â  }

Â  Â  .brand-sub {
Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  max-width: 160px;
Â  Â  }

Â  Â  .nav {
Â  Â  Â  margin-top: 0.5rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.25rem;
Â  Â  }

Â  Â  .nav-item {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.55rem;
Â  Â  Â  padding: 0.55rem 0.7rem;
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  border: 1px solid transparent;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background var(--transition-fast), color var(--transition-fast),
Â  Â  Â  Â  border-color var(--transition-fast);
Â  Â  }

Â  Â  .nav-item span.icon {
Â  Â  Â  width: 18px;
Â  Â  Â  display: inline-flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  opacity: 0.8;
Â  Â  }

Â  Â  .nav-item-active {
Â  Â  Â  background: rgba(56, 189, 248, 0.2);
Â  Â  Â  color: var(--accent);
Â  Â  Â  border-color: var(--accent);
Â  Â  Â  box-shadow: var(--shadow-pill);
Â  Â  }

Â  Â  .nav-item:hover {
Â  Â  Â  background: rgba(56, 189, 248, 0.1);
Â  Â  Â  color: var(--text-main);
Â  Â  }

Â  Â  .sidebar-footer {
Â  Â  Â  margin-top: auto;
Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  color: #6b7280;
Â  Â  }

Â  Â  .main {
Â  Â  Â  flex: 1;
Â  Â  Â  padding: 1.7rem 1.9rem 2rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 1.4rem;
Â  Â  }

Â  Â  .top-bar {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 1rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .top-left {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.35rem;
Â  Â  }

Â  Â  .top-title {
Â  Â  Â  font-size: 1.45rem;
Â  Â  Â  font-weight: 700;
Â  Â  }

Â  Â  .top-subtitle {
Â  Â  Â  font-size: 0.86rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  }

Â  Â  .top-right {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.6rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .pill {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.32rem 0.9rem;
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.4rem;
Â  Â  Â  background: #020617;
Â  Â  Â  border: 1px solid rgba(51, 65, 85, 0.8);
Â  Â  Â  box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.8);
Â  Â  }

Â  Â  .pill-dot {
Â  Â  Â  width: 8px;
Â  Â  Â  height: 8px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: var(--success);
Â  Â  Â  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25);
Â  Â  }

Â  Â  .badge-sistema {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.15rem 0.75rem;
Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  letter-spacing: 0.08em;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  color: var(--accent);
Â  Â  Â  border: 1px solid rgba(56, 189, 248, 0.4);
Â  Â  Â  background: rgba(15, 23, 42, 0.92);
Â  Â  }

Â  Â  .btn-ghost {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.3rem 0.8rem;
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  border: 1px solid rgba(148, 163, 184, 0.6);
Â  Â  Â  background: transparent;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  cursor: pointer;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.35rem;
Â  Â  Â  text-decoration: none;
Â  Â  Â  transition: background var(--transition-fast), color var(--transition-fast),
Â  Â  Â  Â  border-color var(--transition-fast), transform var(--transition-fast);
Â  Â  }

Â  Â  .btn-ghost:hover {
Â  Â  Â  background: rgba(15, 23, 42, 0.9);
Â  Â  Â  color: #f9fafb;
Â  Â  Â  border-color: rgba(209, 213, 219, 0.7);
Â  Â  Â  transform: translateY(-1px);
Â  Â  }

Â  Â  /* WRAPPERS ------------------------------------------------------------- */

Â  Â  .grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(2, minmax(0, 1fr));
Â  Â  Â  gap: 1rem;
Â  Â  }

Â  Â  .grid-1 {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: minmax(0, 1fr);
Â  Â  Â  gap: 1rem;
Â  Â  }

Â  Â  .card {
Â  Â  Â  background: radial-gradient(circle at top left, #020817, #020617 55%);
Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  border: 1px solid var(--border-subtle);
Â  Â  Â  padding: 1.2rem 1.3rem;
Â  Â  Â  box-shadow: var(--shadow-soft);
Â  Â  Â  position: relative;
Â  Â  }

Â  Â  /* ESTILO ESPECÃFICO PARA LA CAJA DE PRECIOS */
Â  Â  #precioCard {
Â  Â  Â  box-shadow: 0 8px 25px rgba(56, 189, 248, 0.2);Â 
Â  Â  Â  border-color: rgba(56, 189, 248, 0.4);Â 
Â  Â  Â  overflow: hidden;Â 
Â  Â  }

Â  Â  #precioCard::before {
Â  Â  Â  content: '';
Â  Â  Â  position: absolute;
Â  Â  Â  top: -50%;
Â  Â  Â  left: -50%;
Â  Â  Â  width: 200%;
Â  Â  Â  height: 200%;
Â  Â  Â  background: conic-gradient(
Â  Â  Â  Â  from 0deg,
Â  Â  Â  Â  transparent 0%,
Â  Â  Â  Â  rgba(56, 189, 248, 0.05) 5%,
Â  Â  Â  Â  transparent 15%,
Â  Â  Â  Â  transparent 100%
Â  Â  Â  );
Â  Â  Â  transform: rotate(45deg);
Â  Â  Â  opacity: 0.5;
Â  Â  Â  animation: gradientRotate 10s linear infinite;
Â  Â  Â  pointer-events: none;
Â  Â  Â  z-index: 0;
Â  Â  }

Â  Â  @keyframes gradientRotate {
Â  Â  Â  from { transform: rotate(0deg); }
Â  Â  Â  to { transform: rotate(360deg); }
Â  Â  }
Â  Â  
Â  Â  .card-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.8rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  margin-bottom: 0.6rem;
Â  Â  }

Â  Â  .card-title {
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .card-subtitle {
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  margin-top: 0.15rem;
Â  Â  }

Â  Â  .card-header-main {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  }

Â  Â  .card-kpi {
Â  Â  Â  font-size: 1.6rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  margin-top: 0.6rem;
Â  Â  }

Â  Â  /* CAMPOS PRECIO -------------------------------------------------------- */

Â  Â  .price-input-row {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.4rem;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  margin-bottom: 0.6rem;
Â  Â  Â  position: relative;Â 
Â  Â  Â  z-index: 1;
Â  Â  }

Â  Â  .price-input-row input {
Â  Â  Â  background: #020617;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid #1f2937;
Â  Â  Â  padding: 0.25rem 0.6rem;
Â  Â  Â  color: var(--text-main);
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  width: 120px;
Â  Â  Â  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
Â  Â  }

Â  Â  .price-input-row input:focus {
Â  Â  Â  outline: none;
Â  Â  Â  border-color: var(--accent);
Â  Â  Â  box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.45);Â 
Â  Â  }

Â  Â  .btn-mini {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.22rem 0.7rem;
Â  Â  Â  font-size: 0.72rem;
Â  Â  Â  border: 1px solid rgba(56, 189, 248, 0.7);
Â  Â  Â  background: var(--accent-soft);
Â  Â  Â  color: var(--accent);
Â  Â  Â  cursor: pointer;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.08em;
Â  Â  Â  transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
Â  Â  Â  position: relative;
Â  Â  Â  z-index: 1;
Â  Â  }

Â  Â  .btn-mini:hover {
Â  Â  Â  background: rgba(56, 189, 248, 0.25);
Â  Â  Â  border-color: var(--accent);
Â  Â  Â  transform: translateY(-1px);
Â  Â  }

Â  Â  .price-lines {
Â  Â  Â  font-size: 0.76rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  margin-top: 0.8rem;Â 
Â  Â  Â  line-height: 1.6;Â 
Â  Â  Â  padding: 1rem 1.2rem;Â 
Â  Â  Â  background: rgba(15, 23, 42, 0.6);Â 
Â  Â  Â  border-radius: 12px;Â 
Â  Â  Â  border: 1px solid rgba(56, 189, 248, 0.2);Â 
Â  Â  Â  box-shadow: inset 0 0 8px rgba(56, 189, 248, 0.1);Â 
Â  Â  Â  position: relative;Â 
Â  Â  Â  z-index: 1;
Â  Â  }

Â  Â  .price-lines .total {
Â  Â  Â  color: #f97316;
Â  Â  Â  font-weight: 700;
Â  Â  Â  font-size: 0.82rem;Â 
Â  Â  Â  display: block;Â 
Â  Â  Â  margin-top: 0.4rem;
Â  Â  Â  padding-top: 0.4rem;
Â  Â  Â  border-top: 1px dashed rgba(249, 115, 22, 0.3);
Â  Â  }

Â  Â  /* BLOQUE PROPIEDADES / VENTA PARTICULAR ------------------------------- */

Â  Â  .property-list {
Â  Â  Â  margin-top: 0.8rem;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  line-height: 1.5;
Â  Â  }

Â  Â  .property-main-name {
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  color: var(--text-main);
Â  Â  Â  margin-bottom: 0.3rem;
Â  Â  }

Â  Â  /* PANEL DE AGENCIA (Nueva secciÃ³n) ------------------------------------- */

Â  Â  .agency-panel-content {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 1.2rem;
Â  Â  Â  padding-top: 0.5rem;
Â  Â  }

Â  Â  .agency-info {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 1rem;
Â  Â  Â  padding-bottom: 0.8rem;
Â  Â  Â  border-bottom: 1px dashed var(--border-subtle);
Â  Â  }

Â  Â  .agency-avatar {
Â  Â  Â  width: 60px;
Â  Â  Â  height: 60px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: var(--success);
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  font-size: 1.4rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: #022c22;
Â  Â  Â  flex-shrink: 0;
Â  Â  }

Â  Â  .agency-details {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.2rem;
Â  Â  }

Â  Â  .agency-name {
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: var(--text-main);
Â  Â  }

Â  Â  .agency-contact, .agency-assessor {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  }

Â  Â  .agency-assessor strong {
Â  Â  Â  color: var(--text-main);
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .agency-services-wrapper {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.7rem;
Â  Â  Â  margin-top: 0.5rem;
Â  Â  }
Â  Â  
Â  Â  .agency-services-list {
Â  Â  Â  display: flex;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  padding-top: 0.3rem;
Â  Â  }

Â  Â  /* Pill de servicios DENTRO de la caja de Agencia (con burbuja verde) */
Â  Â  .agency-service-pill {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.3rem 0.8rem;
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.3rem;
Â  Â  Â  border: 1px solid var(--success);
Â  Â  Â  background-color: rgba(34, 197, 94, 0.1);
Â  Â  Â  color: var(--success);
Â  Â  Â  font-weight: 500;
Â  Â  Â  white-space: nowrap;
Â  Â  Â  transition: transform var(--transition-fast);
Â  Â  }
Â  Â  
Â  Â  .agency-service-pill .dot {
Â  Â  Â  width: 8px;
Â  Â  Â  height: 8px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  background: var(--success);
Â  Â  }

Â  Â  .btn-campana-firmada {
Â  Â  Â  align-self: flex-start;
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.6rem 1.8rem;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  background: linear-gradient(135deg, var(--gold), #ffc107);
Â  Â  Â  color: #333;
Â  Â  Â  box-shadow: 0 4px 15px rgba(251, 191, 36, 0.5);
Â  Â  Â  transition: all var(--transition-fast);
Â  Â  Â  margin-top: 1.5rem;
Â  Â  }

Â  Â  .btn-campana-firmada:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 6px 20px rgba(251, 191, 36, 0.7);
Â  Â  }


Â  Â  /* UPLOADS -------------------------------------------------------------- */

Â  Â  .upload-grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(2, minmax(0, 1fr));
Â  Â  Â  gap: 0.7rem;
Â  Â  Â  margin-top: 0.8rem;
Â  Â  }
Â  Â  
Â  Â  .upload-card {
Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  border: 1px solid var(--border-subtle); 
Â  Â  Â  background: rgba(15, 23, 42, 0.85);
Â  Â  Â  padding: 0.9rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.45rem;
Â  Â  Â  position: relative;
Â  Â  Â  box-shadow: 0 0 4px rgba(56, 189, 248, 0.2), inset 0 0 4px rgba(56, 189, 248, 0.1);
Â  Â  }

Â  Â  .upload-title {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  font-weight: 500;
Â  Â  }

Â  Â  .dropzone {
Â  Â  Â  margin-top: 0.35rem;
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  border: 1px dashed rgba(75, 85, 99, 0.9);
Â  Â  Â  padding: 0.6rem 0.8rem;
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  text-align: center;
Â  Â  Â  background: rgba(15, 23, 42, 0.9);
Â  Â  Â  transition: border-color var(--transition-fast),
Â  Â  Â  Â  background var(--transition-fast), transform var(--transition-fast);
Â  Â  }

Â  Â  .dropzone.dragover {
Â  Â  Â  border-color: var(--accent);
Â  Â  Â  background: rgba(56, 189, 248, 0.05);
Â  Â  Â  box-shadow: 0 0 8px rgba(56, 189, 248, 0.4);
Â  Â  Â  transform: translateY(-1px);
Â  Â  }

Â  Â  .upload-actions-row {
Â  Â  Â  margin-top: 0.35rem;
Â  Â  Â  display: flex;
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .btn-upload {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.24rem 0.85rem;
Â  Â  Â  font-size: 0.74rem;
Â  Â  Â  border: 1px solid var(--accent);
Â  Â  Â  background: rgba(56, 189, 248, 0.1);
Â  Â  Â  color: var(--accent);
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: all 160ms ease-out;
Â  Â  }

Â  Â  .btn-upload:hover {
Â  Â  Â  background: rgba(56, 189, 248, 0.2);
Â  Â  Â  transform: translateY(-1px);
Â  Â  }

Â  Â  .btn-upload.secondary {
Â  Â  Â  border-color: rgba(148, 163, 184, 0.6);
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  background: transparent;
Â  Â  }

Â  Â  .btn-upload.secondary:hover {
Â  Â  Â  background: rgba(148, 163, 184, 0.1);
Â  Â  Â  border-color: var(--text-main);
Â  Â  }

Â  Â  .upload-progress {
Â  Â  Â  margin-top: 0.4rem;
Â  Â  Â  height: 6px; 
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  background: #1f2937; 
Â  Â  Â  overflow: hidden;
Â  Â  Â  border: 1px solid rgba(75, 85, 99, 0.5); 
Â  Â  }

Â  Â  .upload-progress-bar {
Â  Â  Â  height: 100%;
Â  Â  Â  width: 0;
Â  Â  Â  border-radius: inherit;
Â  Â  Â  background: linear-gradient(90deg, var(--success), var(--accent-strong));
Â  Â  Â  transition: width 300ms ease-out; 
Â  Â  }

Â  Â  .upload-meta {
Â  Â  Â  margin-top: 0.35rem;
Â  Â  Â  font-size: 0.72rem;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  min-height: 0.8rem;
Â  Â  }

Â  Â  /* MODAL LISTA DE ARCHIVOS Y VISOR (Mantenido) -------------------------- */

Â  Â  .modal-backdrop {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  background: rgba(15, 23, 42, 0.78);
Â  Â  Â  display: none;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  z-index: 9000;
Â  Â  Â  backdrop-filter: blur(6px);
Â  Â  }

Â  Â  .modal {
Â  Â  Â  background: #020617;
Â  Â  Â  border-radius: 18px;
Â  Â  Â  border: 1px solid #111827;
Â  Â  Â  padding: 1rem 1.1rem;
Â  Â  Â  width: min(720px, 90vw);
Â  Â  Â  max-height: 80vh;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.85);
Â  Â  Â  font-size: 0.8rem;
Â  Â  }

Â  Â  .modal-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-bottom: 0.6rem;
Â  Â  }

Â  Â  .modal-title {
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  .modal-close {
Â  Â  Â  border-radius: 999px;
Â  Â  Â  border: 1px solid rgba(148, 163, 184, 0.7);
Â  Â  Â  background: transparent;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  width: 26px;
Â  Â  Â  height: 26px;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  cursor: pointer;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  }

Â  Â  .modal-body {
Â  Â  Â  overflow-y: auto;
Â  Â  Â  padding-top: 0.4rem;
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  }

Â  Â  .modal-item {
Â  Â  Â  border-radius: 12px;
Â  Â  Â  border: 1px solid #111827;
Â  Â  Â  padding: 0.5rem 0.6rem;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.6rem;
Â  Â  Â  background: #020617;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .modal-item img {
Â  Â  Â  width: 54px;
Â  Â  Â  height: 54px;
Â  Â  Â  object-fit: cover;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  flex-shrink: 0;
Â  Â  }

Â  Â  .modal-item-name {
Â  Â  Â  flex: 1;
Â  Â  }

Â  Â  .modal-actions-row {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 0.4rem;
Â  Â  }

Â  Â  .modal-open,
Â  Â  .modal-delete {
Â  Â  Â  border-radius: 999px;
Â  Â  Â  padding: 0.15rem 0.75rem;
Â  Â  Â  font-size: 0.72rem;
Â  Â  Â  border: 1px solid rgba(156, 163, 175, 0.7);
Â  Â  Â  background: transparent;
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .modal-delete {
Â  Â  Â  border-color: rgba(248, 113, 113, 0.9);
Â  Â  Â  color: #fecaca;
Â  Â  }

Â  Â  /* ACCIONES RECIENTES --------------------------------------------------- */

Â  Â  .recent-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.6rem;
Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  }

Â  Â  /* ESTILO PROFESIONAL PARA LA CAJA DE NOTIFICACIONES */
Â  Â  .recent-list {
Â  Â  Â  margin-top: 0.4rem;
Â  Â  Â  padding: 0.8rem 0.4rem;Â 
Â  Â  Â  background: rgba(15, 23, 42, 0.5);Â 
Â  Â  Â  border-radius: 12px;Â 
Â  Â  Â  border: 1px solid rgba(17, 24, 39, 0.8);Â 
Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);Â 
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  max-height: 230px;
Â  Â  Â  overflow-y: auto;
Â  Â  Â  display: flex;Â 
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.5rem;Â 
Â  Â  }

Â  Â  .recent-item {
Â  Â  Â  padding: 0.4rem 0.3rem;
Â  Â  Â  border-bottom: 1px solid transparent;
Â  Â  Â  border-image: linear-gradient(
Â  Â  Â  Â  Â  to right,
Â  Â  Â  Â  Â  rgba(31, 41, 55, 0.0),
Â  Â  Â  Â  Â  rgba(31, 41, 55, 0.8),
Â  Â  Â  Â  Â  rgba(31, 41, 55, 0.0)
Â  Â  Â  Â  )
Â  Â  Â  Â  1;Â 
Â  Â  Â  display: flex;
Â  Â  Â  gap: 0.7rem;Â 
Â  Â  Â  transition: background 160ms ease-out;
Â  Â  }
Â  Â Â 
Â  Â  .recent-item:last-child {
Â  Â  Â  Â  border-bottom: none;Â 
Â  Â  }
Â  Â  
Â  Â  .recent-time {
Â  Â  Â  color: var(--text-soft);
Â  Â  Â  min-width: 158px;
Â  Â  Â  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
Â  Â  Â  Â  "Liberation Mono", "Courier New", monospace;
Â  Â  }

Â  Â  .recent-text {
Â  Â  Â  flex: 1;
Â  Â  }

Â  Â  .notification-pill {
Â  Â  Â  border-radius: var(--radius-full);
Â  Â  Â  padding: 0.3rem 0.9rem;
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.4rem;
Â  Â  Â  background: rgba(15, 23, 42, 0.95);
Â  Â  Â  border: 1px solid rgba(56, 189, 248, 0.6);
Â  Â  Â  color: var(--accent);
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .notification-pill .dot {
Â  Â  Â  width: 8px;
Â  Â  Â  height: 8px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  background: #22c55e;
Â  Â  Â  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.35);
Â  Â  }

Â  Â  /* VISOR PRO DE IMÃGENES ----------------------------------------------- */

Â  Â  .image-viewer-backdrop {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  background: rgba(15, 23, 42, 0.85);
Â  Â  Â  display: none;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  z-index: 9999;
Â  Â  Â  backdrop-filter: blur(6px);
Â  Â  }

Â  Â  .image-viewer-inner {
Â  Â  Â  position: relative;
Â  Â  Â  max-width: 90vw;
Â  Â  Â  max-height: 90vh;
Â  Â  Â  border-radius: 18px;
Â  Â  Â  overflow: hidden;
Â  Â  Â  background: #020617;
Â  Â  Â  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.9);
Â  Â  Â  padding: 0.6rem;
Â  Â  }

Â  Â  .image-viewer-inner img {
Â  Â  Â  display: block;
Â  Â  Â  max-width: 100%;
Â  Â  Â  max-height: 80vh;
Â  Â  Â  object-fit: contain;
Â  Â  Â  border-radius: 12px;
Â  Â  }

Â  Â  .image-viewer-close {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 0.3rem;
Â  Â  Â  right: 0.4rem;
Â  Â  Â  border: none;
Â  Â  Â  background: rgba(15, 23, 42, 0.9);
Â  Â  Â  color: #e5e7eb;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  width: 28px;
Â  Â  Â  height: 28px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.5);
Â  Â  Â  transition: background 160ms ease-out, transform 160ms ease-out;
Â  Â  }

Â  Â  .image-viewer-close:hover {
Â  Â  Â  background: rgba(30, 64, 175, 0.9);
Â  Â  Â  transform: translateY(-1px);
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="page">
Â  Â  <aside class="sidebar">
Â  Â  Â  <div class="brand">
Â  Â  Â  Â  <div class="brand-logo"></div>
Â  Â  Â  Â  <div class="brand-title">
Â  Â  Â  Â  Â  <strong>Panamove 7.0</strong>
Â  Â  Â  Â  Â  <div class="brand-sub">
Â  Â  Â  Â  Â  Â  Propietarios, agencias, difusores y auditores.
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <nav class="nav">
Â  Â  Â  Â  <a href="dashboard-clean.html" class="nav-item nav-item-active">
Â  Â  Â  Â  Â  <span class="icon">ğŸ“Š</span>Dashboard
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <a href="servicios.html" class="nav-item">
Â  Â  Â  Â  Â  <span class="icon">ğŸ§©</span>Servicios campaÃ±a
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <div class="nav-item">
Â  Â  Â  Â  Â  <span class="icon">ğŸ </span>Propiedades
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="nav-item">
Â  Â  Â  Â  Â  <span class="icon">ğŸ“£</span>Difusores
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="nav-item">
Â  Â  Â  Â  Â  <span class="icon">ğŸ•µï¸</span>AuditorÃ­a
Â  Â  Â  Â  </div>
Â  Â  Â  </nav>

Â  Â  Â  <div class="sidebar-footer">
Â  Â  Â  Â  Vista de ejemplo del sistema 7.0 para propietarios.
Â  Â  Â  </div>
Â  Â  </aside>

Â  Â  <main class="main">
Â  Â  Â  <header class="top-bar">
Â  Â  Â  Â  <div class="top-left">
Â  Â  Â  Â  Â  <div class="top-title">Dashboard campaÃ±a</div>
Â  Â  Â  Â  Â  <div class="top-subtitle">
Â  Â  Â  Â  Â  Â  Resumen rÃ¡pido de tu campaÃ±a real dentro del sistema 7.0.
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="top-right">
Â  Â  Â  Â  Â  <span class="badge-sistema">
Â  Â  Â  Â  Â  Â  <span class="pill-dot"></span> SISTEMA 7.0
Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  <a href="servicios.html" class="btn-ghost">
Â  Â  Â  Â  Â  Â  Ver catÃ¡logo completo de servicios
Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  </div>
Â  Â  Â  </header>

Â  Â  Â  <section class="grid">
Â  Â  Â  Â  <article class="card" id="precioCard">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">Precio de la propiedad</div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  SimulaciÃ³n de costes con servicios activados e IVA.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button type="button" class="btn-mini" id="btnSimulacion">
Â  Â  Â  Â  Â  Â  Â  SIMULACIÃ“N RÃPIDA 7.0
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="price-input-row">
Â  Â  Â  Â  Â  Â  <span>Introduce el precio orientativo:</span>
Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  type="number"
Â  Â  Â  Â  Â  Â  Â  id="precioInput"
Â  Â  Â  Â  Â  Â  Â  value="545000"
Â  Â  Â  Â  Â  Â  Â  min="50000"
Â  Â  Â  Â  Â  Â  Â  step="1000"
Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  <span>â‚¬</span>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="price-lines" id="priceLines">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </article>

Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">Venta particular y colaboraciÃ³n</div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  Espacio para propietarios que aÃºn no han decidido agencia,
Â  Â  Â  Â  Â  Â  Â  Â  pero quieren activar servicios profesionales a Ã©xito.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="property-list">
Â  Â  Â  Â  Â  Â  <div class="property-main-name">
Â  Â  Â  Â  Â  Â  Â  Ãtico Blue Sunset â€“ La Duquesa, Manilva.
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  Â  Esta propiedad estÃ¡ en campaÃ±a dentro del mÃ©todo 7.0. Desde aquÃ­
Â  Â  Â  Â  Â  Â  Â  se coordinarÃ¡ la venta como particular y la colaboraciÃ³n con
Â  Â  Â  Â  Â  Â  Â  profesionales de servicios activos (fotografÃ­a, vÃ­deo, home
Â  Â  Â  Â  Â  Â  Â  staging, blogger internacional, etc.).
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </article>
Â  Â  Â  </section>

Â  Â  Â  <section class="grid">
Â  Â  Â  Â  Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">Panel de Agencia</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="agency-panel-content">
Â  Â  Â  Â  Â  Â  <div class="agency-info">
Â  Â  Â  Â  Â  Â  Â  <div class="agency-avatar">BR</div>
Â  Â  Â  Â  Â  Â  Â  <div class="agency-details">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="agency-name">Bernabeu Realty</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="agency-contact">TelÃ©fono: 654 34 32 32</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="agency-assessor">Nombre del Asesor: <strong>VÃ­ctor PÃ©rez</strong></div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="agency-services-wrapper">
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle" style="margin-top:-0.5rem; margin-bottom: 0.5rem;">Servicios activos gestionados:</div>
Â  Â  Â  Â  Â  Â  Â  <div class="agency-services-list" id="agencyActiveServices">
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button type="button" class="btn-campana-firmada">
Â  Â  Â  Â  Â  Â  Â  CampaÃ±a Firmada
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </article>

Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="recent-header">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">Acciones recientes</div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  HistÃ³rico de lo que se ha activado, subido y autorizado.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button type="button" class="notification-pill" id="btnNotif">
Â  Â  Â  Â  Â  Â  Â  <span class="dot"></span> Notificaciones
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="recent-list" id="recentList"></div>

Â  Â  Â  Â  Â  <p class="card-subtitle" style="margin-top: 0.5rem;">
Â  Â  Â  Â  Â  Â  Este histÃ³rico es el â€œcerebroâ€ de la campaÃ±a: siempre podrÃ¡s revisar
Â  Â  Â  Â  Â  Â  quÃ© se hizo, quiÃ©n lo activÃ³ y cuÃ¡ndo.
Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </article>
Â  Â  Â  </section>

Â  Â  Â  <section class="grid">
Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">Subir fotos y documentaciÃ³n</div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  Gestiona todas las fotos HD, planos y escrituras desde aquÃ­.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="upload-grid">
Â  Â  Â  Â  Â  Â  <div class="upload-card">
Â  Â  Â  Â  Â  Â  Â  <div class="upload-title">Subir fotos de la vivienda</div>
Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  class="dropzone"
Â  Â  Â  Â  Â  Â  Â  Â  id="dropFotos"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Arrastra las fotos aquÃ­ o haz clic para seleccionar.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  id="fileFotos"
Â  Â  Â  Â  Â  Â  Â  Â  accept="image/*"
Â  Â  Â  Â  Â  Â  Â  Â  multiple
Â  Â  Â  Â  Â  Â  Â  Â  style="display: none;"
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  <div class="upload-progress">
Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="upload-progress-bar"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="progressFotos"
Â  Â  Â  Â  Â  Â  Â  Â  ></div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="upload-actions-row">
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn-upload"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="btnSubirFotos"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Subir / arrastrar fotos
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn-upload secondary"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="btnVerFotos"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Ver fotos subidas
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="upload-meta" id="metaFotos"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="upload-card">
Â  Â  Â  Â  Â  Â  Â  <div class="upload-title">Subir documentaciÃ³n</div>
Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  class="dropzone"
Â  Â  Â  Â  Â  Â  Â  Â  id="dropDocs"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Arrastra documentaciÃ³n (PDF, escriturasâ€¦) o haz clic.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  type="file"
Â  Â  Â  Â  Â  Â  Â  Â  id="fileDocs"
Â  Â  Â  Â  Â  Â  Â  Â  multiple
Â  Â  Â  Â  Â  Â  Â  Â  style="display: none;"
Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  <div class="upload-progress">
Â  Â  Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="upload-progress-bar"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="progressDocs"
Â  Â  Â  Â  Â  Â  Â  Â  ></div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="upload-actions-row">
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn-upload"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="btnSubirDocs"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Subir / arrastrar documentaciÃ³n
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn-upload secondary"
Â  Â  Â  Â  Â  Â  Â  Â  Â  id="btnVerDocs"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Ver documentaciÃ³n subida
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="upload-meta" id="metaDocs"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </article>

Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  Servicios disponibles (tarifas ejemplo)
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  Activa solo lo que tenga sentido para tu campaÃ±a.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <a href="servicios.html" class="btn-ghost" id="btnVerServicios">
Â  Â  Â  Â  Â  Â  Â  Ver todos los servicios
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="services-grid" id="servicesGrid"></div>

Â  Â  Â  Â  Â  <p class="card-subtitle" style="margin-top: 0.7rem;">
Â  Â  Â  Â  Â  Â  El propietario ve esto como â€œpanel de mandoâ€: quÃ© estÃ¡ activo, quÃ©
Â  Â  Â  Â  Â  Â  falta por activar y quÃ© servicios ya han sido realizados.
Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </article>
Â  Â  Â  </section>

Â  Â  Â  <section class="grid-1">
Â  Â  Â  Â  <article class="card">
Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  <div class="card-header-main">
Â  Â  Â  Â  Â  Â  Â  <div class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  Agencias interesadas en gestiÃ³n de campaÃ±a de venta
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-subtitle">
Â  Â  Â  Â  Â  Â  Â  Â  Cuando autorices, la agencia recibirÃ¡ tus datos de contacto para
Â  Â  Â  Â  Â  Â  Â  Â  llamarte cuanto antes.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="agencies-list" id="agenciesList">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="agency-caption">
Â  Â  Â  Â  Â  Â  Al confirmar, compartiremos tu telÃ©fono, correo y WhatsApp con la
Â  Â  Â  Â  Â  Â  agencia autorizada para que te contacte lo antes posible.
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </article>
Â  Â  Â  </section>
Â  Â  </main>
Â  </div>

Â  <div class="modal-backdrop" id="uploadsModal">
Â  Â  <div class="modal">
Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  <div class="modal-title" id="modalTitle">Archivos subidos</div>
Â  Â  Â  Â  <button class="modal-close" id="modalClose">âœ•</button>
Â  Â  Â  </div>
Â  Â  Â  <div class="modal-body" id="modalBody"></div>
Â  Â  </div>
Â  </div>

Â  <div class="image-viewer-backdrop" id="imageViewer">
Â  Â  <div class="image-viewer-inner">
Â  Â  Â  <button class="image-viewer-close" id="imageViewerClose">âœ•</button>
Â  Â  Â  <img src="" alt="Vista previa" id="imageViewerImg" />
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  /* ============================
Â  Â  	CONSTANTES DE STORAGE
Â  Â  	============================ */

Â  Â  const STORAGE_SERVICIOS = "panamoveServicios";
Â  Â  const STORAGE_UPLOADS = "panamoveUploads";
Â  Â  const STORAGE_LOG = "panamoveLog";
Â  Â Â 
Â  Â  const UPLOAD_DELAY = 10;Â 

Â  Â  /* ============================
Â  Â  	UTILIDAD: LOG DE ACCIONES
Â  Â  	============================ */

Â  Â  function loadLog() {
Â  Â  Â  try {
Â  Â  Â  Â  const raw = localStorage.getItem(STORAGE_LOG);
Â  Â  Â  Â  return raw ? JSON.parse(raw) : [];
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  return [];
Â  Â  Â  }
Â  Â  }

Â  Â  function saveLog(list) {
Â  Â  Â  try {
Â  Â  Â  Â  localStorage.setItem(STORAGE_LOG, JSON.stringify(list));
Â  Â  Â  } catch (e) {}
Â  Â  }

Â  Â  function addLogEntry(text) {
Â  Â  Â  const now = new Date();
Â  Â  Â  const dateStr = now.toISOString().slice(0, 10); // YYYY-MM-DD
Â  Â  Â  const timeStr = now.toTimeString().slice(0, 8); // HH:MM:SS

Â  Â  Â  const list = loadLog();
Â  Â  Â  list.unshift({
Â  Â  Â  Â  time: timeStr,
Â  Â  Â  Â  date: dateStr,
Â  Â  Â  Â  text,
Â  Â  Â  });

Â  Â  Â  // Limitar a 200 entradas
Â  Â  Â  if (list.length > 200) list.length = 200;
Â  Â  Â  saveLog(list);
Â  Â  Â  renderLog();
Â  Â  }

Â  Â  function renderLog() {
Â  Â  Â  const list = loadLog();
Â  Â  Â  const container = document.getElementById("recentList");
Â  Â  Â  if (!container) return;

Â  Â  Â  container.innerHTML = "";

Â  Â  Â  if (!list.length) {
Â  Â  Â  Â  const p = document.createElement("p");
Â  Â  Â  Â  p.className = "card-subtitle";
Â  Â  Â  Â  p.textContent =
Â  Â  Â  Â  Â  "AquÃ­ aparecerÃ¡n los servicios activados, documentos subidos y agencias autorizadas.";
Â  Â  Â  Â  container.appendChild(p);
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  list.forEach((item) => {
Â  Â  Â  Â  const row = document.createElement("div");
Â  Â  Â  Â  row.className = "recent-item";

Â  Â  Â  Â  const time = document.createElement("div");
Â  Â  Â  Â  time.className = "recent-time";
Â  Â  Â  Â  time.textContent = `[${item.time} Â· ${item.date}]`;

Â  Â  Â  Â  const text = document.createElement("div");
Â  Â  Â  Â  text.className = "recent-text";
Â  Â  Â  Â  text.textContent = item.text;

Â  Â  Â  Â  row.appendChild(time);
Â  Â  Â  Â  row.appendChild(text);
Â  Â  Â  Â  container.appendChild(row);
Â  Â  Â  });
Â  Â  }

Â  Â  /* ============================
Â  Â  	PRECIO / SIMULACIÃ“N
Â  Â  	============================ */

Â  Â  function formatMoney(num) {
Â  Â  Â  return num.toLocaleString("es-ES", {
Â  Â  Â  Â  minimumFractionDigits: 0,
Â  Â  Â  Â  maximumFractionDigits: 0,
Â  Â  Â  });
Â  Â  }

Â  Â  // LÃ³gica de precios actualizada para incluir costes de servicios.
Â  Â  function recalcPrice() {
Â  Â  Â  const input = document.getElementById("precioInput");
Â  Â  Â  const lines = document.getElementById("priceLines");
Â  Â  Â  if (!input || !lines) return;

Â  Â  Â  const base = Number(input.value || 0);

Â  Â  Â  // 1. Obtener la suma de costes fijos de servicios activos
Â  Â  Â  const serviciosActivos = loadServiciosEstado().filter(svc => svc.activo);
Â  Â  Â  const costeServiciosFijos = serviciosActivos.reduce((sum, svc) => sum + (svc.costeFijo || 0), 0);
Â  Â  Â Â 
Â  Â  Â  // 2. ComisiÃ³n base de gestiÃ³n (3% del precio de venta)
Â  Â  Â  const comisionBase = base * 0.03;

Â  Â  Â  // 3. ComisiÃ³n total (comisiÃ³n 3% fija de venta + Coste Servicios Fijos)
Â  Â  Â  const comisionTotal = comisionBase + costeServiciosFijos;Â 
Â  Â  Â Â 
Â  Â  Â  // 4. Calcular IVA (21% sobre la comisiÃ³n total)
Â  Â  Â  const ivaServicios = comisionTotal * 0.21;
Â  Â  Â Â 
Â  Â  Â  // 5. Total a pagar
Â  Â  Â  const totalServicios = comisionTotal + ivaServicios;
Â  Â  Â Â 
Â  Â  Â  // 6. Neto para el propietario
Â  Â  Â  const neto = base - comisionTotal;

Â  Â  Â  lines.innerHTML = `
Â  Â  Â  Â  IVA servicios 21 %: ${formatMoney(ivaServicios)} â‚¬<br />
Â  Â  Â  Â  ComisiÃ³n 3 % gestiÃ³n + Coste servicios fijos: ${formatMoney(comisionTotal)} â‚¬<br />
Â  Â  Â  Â  <span class="total">Total a pagar (servicios + comisiÃ³n + IVA): ${formatMoney(
Â  Â  Â  Â  Â  totalServicios
Â  Â  Â  Â  )} â‚¬</span><br /><br />
Â  Â  Â  Â  Neto para ti (antes de plusvalÃ­a): ${formatMoney(neto)} â‚¬
Â  Â  Â  `;
Â  Â  }


Â  Â  /* ============================
Â  Â  	SERVICIOS (4 EN DASHBOARD)
Â  Â  	============================ */

Â  Â  // Base de datos completa de servicios
Â  Â  const serviciosDashboardBase = [
Â  Â  Â  { id: "fotos", nombre: "Fotos PRO", categoria: "Imagen", precio: "450 â‚¬ Â· pago a Ã©xito", costeFijo: 450, descripcion: "FotÃ³grafo especializado inmobiliario.", activoPorDefecto: true },
Â  Â  Â  { id: "video-dron", nombre: "VÃ­deo + dron", categoria: "VÃ­deo", precio: "450 â‚¬ Â· pago a Ã©xito", costeFijo: 450, descripcion: "Recorrido interior + vistas aÃ©reas.", activoPorDefecto: true },
Â  Â  Â  { id: "home-staging", nombre: "Home staging", categoria: "EstÃ©tica", precio: "750â€“1200 â‚¬ Â· pago a Ã©xito", costeFijo: 750, descripcion: "Mejora estÃ©tica sin reformas pesadas.", activoPorDefecto: true },
Â  Â  Â  { id: "blogger-internacional", nombre: "Blogger internacional", categoria: "DifusiÃ³n", precio: "3000 â‚¬ Â· pago a Ã©xito", costeFijo: 3000, descripcion: "Historia real de la vivienda en otro paÃ­s.", activoPorDefecto: false },
Â  Â  ];

Â  Â  function loadServiciosEstado() {
Â  Â  Â  try {
Â  Â  Â  Â  const raw = localStorage.getItem(STORAGE_SERVICIOS);
Â  Â  Â  Â  const stored = raw ? JSON.parse(raw) : [];
Â  Â  Â  Â  const map = new Map(stored.map((s) => [s.id, s.activo]));
Â  Â  Â  Â  // Mantiene costeFijo y estado activo
Â  Â  Â  Â  return serviciosDashboardBase.map((svc) => ({
Â  Â  Â  Â  Â  ...svc,
Â  Â  Â  Â  Â  activo: map.has(svc.id)
Â  Â  Â  Â  Â  Â  ? !!map.get(svc.id)
Â  Â  Â  Â  Â  Â  : svc.id === "fotos" || svc.id === "home-staging"
Â  Â  Â  Â  }));
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  return serviciosDashboardBase.map((svc) => ({
Â  Â  Â  Â  Â  ...svc,
Â  Â  Â  Â  Â  activo: svc.id === "fotos" || svc.id === "home-staging",
Â  Â  Â  Â  }));
Â  Â  Â  }
Â  Â  }

Â  Â  let serviciosEstado = loadServiciosEstado();

Â  Â  function saveServiciosEstado() {
Â  Â  Â  try {
Â  Â  Â  Â  const raw = localStorage.getItem(STORAGE_SERVICIOS);
Â  Â  Â  Â  const stored = raw ? JSON.parse(raw) : [];
Â  Â  Â  Â  const map = new Map(stored.map((s) => [s.id, s]));
Â  Â  Â  Â  serviciosEstado.forEach((svc) => {
Â  Â  Â  Â  Â  map.set(svc.id, { id: svc.id, activo: !!svc.activo });
Â  Â  Â  Â  });
Â  Â  Â  Â  const arr = Array.from(map.values());
Â  Â  Â  Â  localStorage.setItem(STORAGE_SERVICIOS, JSON.stringify(arr));
Â  Â  Â  } catch (e) {}
Â  Â  }

Â  Â  function renderServiciosDashboard() {
Â  Â  Â  const grid = document.getElementById("servicesGrid");
Â  Â  Â  const pillsRow = document.getElementById("statusPillsRow");
Â  Â  Â  if (!grid || !pillsRow) return;

Â  Â  Â  grid.innerHTML = "";
Â  Â  Â  pillsRow.innerHTML = ""; // Esta fila se elimina, pero mantenemos la referencia

Â  Â  Â  serviciosEstado.forEach((svc) => {
Â  Â  Â  Â  
Â  Â  Â  Â  // cards
Â  Â  Â  Â  const card = document.createElement("article");
Â  Â  Â  Â  card.className = "service-card" + (svc.activo ? " service-card-active" : "");
Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  <div class="service-card-header">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="service-name">${svc.nombre}</div>
Â  Â  Â  Â  Â  Â  Â  <div class="service-price">${svc.precio}</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="service-tag">${svc.categoria}</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <p class="service-desc">${svc.descripcion}</p>
Â  Â  Â  Â  Â  <div class="service-footer">
Â  Â  Â  Â  Â  Â  <span class="service-state-pill ${
Â  Â  Â  Â  Â  Â  Â  svc.activo ? "" : "inactive"
Â  Â  Â  Â  Â  Â  }">
Â  Â  Â  Â  Â  Â  Â  <span class="icon">â˜…</span>
Â  Â  Â  Â  Â  Â  Â  <span>${
Â  Â  Â  Â  Â  Â  Â  Â  svc.activo ? "Servicio activado" : "Pendiente de activar"
Â  Â  Â  Â  Â  Â  Â  }</span>
Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  <button class="service-btn ${
Â  Â  Â  Â  Â  Â  Â  svc.activo ? "service-btn-danger" : "service-btn-primary"
Â  Â  Â  Â  Â  Â  }" data-id="${svc.id}">
Â  Â  Â  Â  Â  Â  Â  ${svc.activo ? "Desactivar" : "Activar servicio"}
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  });

Â  Â  Â  grid.querySelectorAll(".service-btn").forEach((btn) => {
Â  Â  Â  Â  btn.addEventListener("click", () => {
Â  Â  Â  Â  Â  const id = btn.getAttribute("data-id");
Â  Â  Â  Â  Â  toggleServicioDashboard(id);
Â  Â  Â  Â  });
Â  Â  Â  });
Â  Â  }

Â  Â  function toggleServicioDashboard(id) {
Â  Â  Â  serviciosEstado = serviciosEstado.map((svc) =>
Â  Â  Â  Â  svc.id === id ? { ...svc, activo: !svc.activo } : svc
Â  Â  Â  );
Â  Â  Â  saveServiciosEstado();
Â  Â  Â  const svc = serviciosEstado.find((s) => s.id === id);
Â  Â  Â  if (svc) {
Â  Â  Â  Â  addLogEntry(
Â  Â  Â  Â  Â  `${svc.activo ? "Servicio activado" : "Servicio desactivado"}: ${
Â  Â  Â  Â  Â  Â  svc.nombre
Â  Â  Â  Â  Â  }.`
Â  Â  Â  Â  );
Â  Â  Â  }
Â  Â  Â  renderServiciosDashboard();
Â  Â  Â  renderAgencyActiveServices(); // Actualiza los pills de la agencia
Â  Â  Â  recalcPrice();
Â  Â  }
Â  Â  
Â  Â  // FunciÃ³n para renderizar los pills de servicios activos DENTRO del Panel de Agencia
Â  Â  function renderAgencyActiveServices() {
Â  Â  Â  const container = document.getElementById("agencyActiveServices");
Â  Â  Â  if (!container) return;
Â  Â  Â  
Â  Â  Â  container.innerHTML = '';
Â  Â  Â  
Â  Â  Â  const activos = serviciosEstado.filter(svc => svc.activo);
Â  Â  Â  
Â  Â  Â  if (activos.length === 0) {
Â  Â  Â  Â  container.innerHTML = `<p class="card-subtitle" style="margin: 0; padding-top: 5px;">NingÃºn servicio activo con la agencia.</p>`;
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  activos.forEach(svc => {
Â  Â  Â  Â  const pill = document.createElement('div');
Â  Â  Â  Â  pill.className = 'agency-service-pill';
Â  Â  Â  Â  // Estilo pill verde con dot
Â  Â  Â  Â  pill.innerHTML = `<span class="dot"></span> ${svc.nombre} activado por el propietario`; 
Â  Â  Â  Â  container.appendChild(pill);
Â  Â  Â  });
Â  Â  }


Â  Â  /* ============================
Â  Â  	AGENCIAS
Â  Â  	============================ */

Â  Â  const agenciesData = [
Â  Â  Â  {
Â  Â  Â  Â  id: "bernabeu",
Â  Â  Â  Â  siglas: "BR",
Â  Â  Â  Â  nombre: "Bernabeu Realty",
Â  Â  Â  Â  telefono: "654 34 32 32",
Â  Â  Â  Â  texto: "Dispuesta a asumir los gastos clave para acelerar la venta.",
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  id: "roth",
Â  Â  Â  Â  siglas: "RT",
Â  Â  Â  Â  nombre: "RT Rothchild Inmo",
Â  Â  Â  Â  telefono: "654 34 32 32",
Â  Â  Â  Â  texto:
Â  Â  Â  Â  Â  "Dispuesta a asumir los gastos clave para acelerar la venta.",
Â  Â  Â  },
Â  Â  ];

Â  Â  function loadAgenciesState() {
Â  Â  Â  try {
Â  Â  Â  Â  const raw = localStorage.getItem("panamoveAgencias");
Â  Â  Â  Â  const stored = raw ? JSON.parse(raw) : {};
Â  Â  Â  Â  return agenciesData.map((a) => ({
Â  Â  Â  Â  Â  ...a,
Â  Â  Â  Â  Â  autorizado: !!stored[a.id],
Â  Â  Â  Â  }));
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  return agenciesData.map((a) => ({ ...a, autorizado: false }));
Â  Â  Â  }
Â  Â  }

Â  Â  let agenciesState = loadAgenciesState();

Â  Â  function saveAgenciesState() {
Â  Â  Â  try {
Â  Â  Â  Â  const map = {};
Â  Â  Â  Â  agenciesState.forEach((a) => {
Â  Â  Â  Â  Â  map[a.id] = !!a.autorizado;
Â  Â  Â  Â  });
Â  Â  Â  Â  localStorage.setItem("panamoveAgencias", JSON.stringify(map));
Â  Â  Â  } catch (e) {}
Â  Â  }

Â  Â  function renderAgencies() {
Â  Â  Â  const container = document.getElementById("agenciesList");
Â  Â  Â  if (!container) return;
Â  Â  Â  container.innerHTML = "";

Â  Â  Â  agenciesState.forEach((ag) => {
Â  Â  Â  Â  const row = document.createElement("div");
Â  Â  Â  Â  row.className = "agency-row";

Â  Â  Â  Â  const main = document.createElement("div");
Â  Â  Â  Â  main.className = "agency-main";

Â  Â  Â  Â  const avatar = document.createElement("div");
Â  Â  Â  Â  avatar.className = "agency-avatar";
Â  Â  Â  Â  avatar.textContent = ag.siglas;

Â  Â  Â  Â  const text = document.createElement("div");
Â  Â  Â  Â  const name = document.createElement("div");
Â  Â  Â  Â  name.className = "agency-name";
Â  Â  Â  Â  name.textContent = ag.nombre;
Â  Â  Â  Â  const phone = document.createElement("div");
Â  Â  Â  Â  phone.className = "agency-phone";
Â  Â  Â  Â  phone.textContent = `TelÃ©fono: ${ag.telefono}`;
Â  Â  Â  Â  const caption = document.createElement("div");
Â  Â  Â  Â  caption.className = "agency-phone";
Â  Â  Â  Â  caption.textContent = ag.texto;

Â  Â  Â  Â  text.appendChild(name);
Â  Â  Â  Â  text.appendChild(phone);
Â  Â  Â  Â  text.appendChild(caption);

Â  Â  Â  Â  main.appendChild(avatar);
Â  Â  Â  Â  main.appendChild(text);

Â  Â  Â  Â  const btn = document.createElement("button");
Â  Â  Â  Â  btn.className =
Â  Â  Â  Â  Â  "agency-btn" + (ag.autorizado ? " agency-btn-confirmed" : "");
Â  Â  Â  Â  btn.innerHTML = `${
Â  Â  Â  Â  Â  ag.autorizado ? "âœ… Datos enviados" : "âœ… Autorizar"
Â  Â  Â  Â  }`;
Â  Â  Â  Â  btn.addEventListener("click", () => {
Â  Â  Â  Â  Â  ag.autorizado = !ag.autorizado;
Â  Â  Â  Â  Â  saveAgenciesState();
Â  Â  Â  Â  Â  addLogEntry(
Â  Â  Â  Â  Â  Â  ag.autorizado
Â  Â  Â  Â  Â  Â  Â  ? `Has autorizado a ${ag.nombre} para gestionar la campaÃ±a y recibir tus datos de contacto.`
Â  Â  Â  Â  Â  Â  Â  : `Has revocado la autorizaciÃ³n a ${ag.nombre} en la campaÃ±a.`
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  renderAgencies();
Â  Â  Â  Â  });

Â  Â  Â  Â  row.appendChild(main);
Â  Â  Â  Â  row.appendChild(btn);
Â  Â  Â  Â  container.appendChild(row);
Â  Â  Â  });
Â  Â  }

Â  Â  /* ============================
Â  Â  	UPLOADS + MODAL
Â  Â  	============================ */

Â  Â  function loadUploads() {
Â  Â  Â  try {
Â  Â  Â  Â  const raw = localStorage.getItem(STORAGE_UPLOADS);
Â  Â  Â  Â  const parsed = raw ? JSON.parse(raw) : {};
Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  fotos: Array.isArray(parsed.fotos) ? parsed.fotos : [],
Â  Â  Â  Â  Â  docs: Array.isArray(parsed.docs) ? parsed.docs : [],
Â  Â  Â  Â  };
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  return { fotos: [], docs: [] };
Â  Â  Â  }
Â  Â  }

Â  Â  function saveUploads(data) {
Â  Â  Â  try {
Â  Â  Â  Â  localStorage.setItem(STORAGE_UPLOADS, JSON.stringify(data));
Â  Â  Â  } catch (e) {}
Â  Â  }

Â  Â  let uploads = loadUploads();

Â  Â  function updateUploadMeta() {
Â  Â  Â  const metaFotos = document.getElementById("metaFotos");
Â  Â  Â  const metaDocs = document.getElementById("metaDocs");
Â  Â  Â Â 
Â  Â  Â  const fotosCount = uploads.fotos.length;
Â  Â  Â  const docsCount = uploads.docs.length;

Â  Â  Â  if (metaFotos) {
Â  Â  Â  Â  metaFotos.textContent =
Â  Â  Â  Â  Â  fotosCount === 0
Â  Â  Â  Â  Â  Â  ? "No hay fotos subidas todavÃ­a."
Â  Â  Â  Â  Â  Â  : `${fotosCount} foto(s) guardadas en el sistema.`;
Â  Â  Â  }
Â  Â  Â  if (metaDocs) {
Â  Â  Â  Â  metaDocs.textContent =
Â  Â  Â  Â  Â  docsCount === 0
Â  Â  Â  Â  Â  Â  ? "No hay documentos subidos todavÃ­a."
Â  Â  Â  Â  Â  Â  : `${docsCount} documento(s) guardados en el sistema.`;
Â  Â  Â  }
Â  Â  }

Â  Â  // Nueva funciÃ³n para simular y manejar la subida de archivos
Â  Â  function handleFiles(list, tipo) {
Â  Â  Â  if (!list || !list.length) return;
Â  Â  Â Â 
Â  Â  Â  const progressBar =
Â  Â  Â  Â  tipo === "fotos"
Â  Â  Â  Â  Â  ? document.getElementById("progressFotos")
Â  Â  Â  Â  Â  : document.getElementById("progressDocs");
Â  Â  Â  const metaElement =Â 
Â  Â  Â  Â  tipo === "fotos"
Â  Â  Â  Â  Â  ? document.getElementById("metaFotos")
Â  Â  Â  Â  Â  : document.getElementById("metaDocs");
Â  Â  Â  Â  Â Â 
Â  Â  Â  if (progressBar) progressBar.style.width = "0%";
Â  Â  Â Â 
Â  Â  Â  const filesArray = Array.from(list);
Â  Â  Â  let filesProcessed = 0;

Â  Â  Â  // Usamos una funciÃ³n anidada para manejar el progreso y la lectura
Â  Â  Â  const processFile = (file) => {
Â  Â  Â  Â  Â  return new Promise(resolve => {
Â  Â  Â  Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  reader.onload = (ev) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const dataUrl = ev.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: file.name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dataUrl,
Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (tipo === "fotos") uploads.fotos.push(item);
Â  Â  Â  Â  Â  Â  Â  Â  Â  else uploads.docs.push(item);
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  filesProcessed++;
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  const percent = Math.round((filesProcessed / filesArray.length) * 100);
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (progressBar) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  progressBar.style.width = percent + "%";
Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  if (metaElement) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  metaElement.textContent = `Subiendo: ${percent}% completado (${filesProcessed}/${filesArray.length} archivos)`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  // Simular tiempo de subida
Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => resolve(), UPLOAD_DELAY);Â 
Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  // Empezar la lectura del archivo
Â  Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);Â 
Â  Â  Â  Â  Â  });
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  // Encadenar las promesas para subirlos uno por uno (simulaciÃ³n secuencial)
Â  Â  Â  filesArray.reduce((p, file) => p.then(() => processFile(file)), Promise.resolve())
Â  Â  Â  Â  Â  .then(() => {
Â  Â  Â  Â  Â  Â  Â  // Una vez que todos los archivos han sido procesados
Â  Â  Â  Â  Â  Â  Â  saveUploads(uploads);
Â  Â  Â  Â  Â  Â  Â  updateUploadMeta();
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  if (metaElement) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  metaElement.textContent = `${filesArray.length} archivo(s) subidos con Ã©xito.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  // Opcional: limpiar la barra de progreso despuÃ©s de un pequeÃ±o retraso
Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => { if (progressBar) progressBar.style.width = "0%"; }, 2000);Â 
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  addLogEntry(
Â  Â  Â  Â  Â  Â  Â  Â  Â  `Has subido ${filesArray.length} ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tipo === "fotos" ? "foto(s)" : "documento(s)"
Â  Â  Â  Â  Â  Â  Â  Â  Â  } al dashboard.`
Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  });
Â  Â  }

Â  Â  // --- modal de lista (fotos / docs) ---
Â  Â  const uploadsModal = document.getElementById("uploadsModal");
Â  Â  const modalBody = document.getElementById("modalBody");
Â  Â  const modalTitle = document.getElementById("modalTitle");
Â  Â  const modalClose = document.getElementById("modalClose");

Â  Â  function openModalUploads(tipo) {
Â  Â  Â  if (!uploadsModal || !modalBody) return;
Â  Â  Â  uploadsModal.style.display = "flex";
Â  Â  Â  modalBody.innerHTML = "";

Â  Â  Â  const list = tipo === "fotos" ? uploads.fotos : uploads.docs;
Â  Â  Â  modalTitle.textContent =
Â  Â  Â  Â  tipo === "fotos" ? "Fotos subidas" : "DocumentaciÃ³n subida";

Â  Â  Â  if (!list.length) {
Â  Â  Â  Â  const p = document.createElement("p");
Â  Â  Â  Â  p.className = "card-subtitle";
Â  Â  Â  Â  p.textContent = "No hay archivos subidos todavÃ­a.";
Â  Â  Â  Â  modalBody.appendChild(p);
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  list.forEach((item, idx) => {
Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  card.className = "modal-item";

Â  Â  Â  Â  const openInNew = () => {
Â  Â  Â  Â  Â  if (!item.dataUrl) return;
Â  Â  Â  Â  Â  if (tipo === "fotos") {
Â  Â  Â  Â  Â  Â  openImageViewer(item.dataUrl, item.name);
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  window.open(item.dataUrl, "_blank");
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  if (tipo === "fotos" && item.dataUrl) {
Â  Â  Â  Â  Â  const img = document.createElement("img");
Â  Â  Â  Â  Â  img.src = item.dataUrl;
Â  Â  Â  Â  Â  img.alt = item.name || "Foto subida";
Â  Â  Â  Â  Â  img.addEventListener("click", openInNew);
Â  Â  Â  Â  Â  card.appendChild(img);
Â  Â  Â  Â  }

Â  Â  Â  Â  const name = document.createElement("div");
Â  Â  Â  Â  name.className = "modal-item-name";
Â  Â  Â  Â  name.textContent = item.name || `Archivo ${idx + 1}`;
Â  Â  Â  Â  card.appendChild(name);

Â  Â  Â  Â  const actions = document.createElement("div");
Â  Â  Â  Â  actions.className = "modal-actions-row";

Â  Â  Â  Â  const openBtn = document.createElement("button");
Â  Â  Â  Â  openBtn.className = "modal-open";
Â  Â  Â  Â  openBtn.textContent = "Abrir";
Â  Â  Â  Â  openBtn.addEventListener("click", openInNew);

Â  Â  Â  Â  const delBtn = document.createElement("button");
Â  Â  Â  Â  delBtn.className = "modal-delete";
Â  Â  Â  Â  delBtn.textContent = "Eliminar";
Â  Â  Â  Â  delBtn.addEventListener("click", (ev) => {
Â  Â  Â  Â  Â  ev.stopPropagation();
Â  Â  Â  Â  Â  list.splice(idx, 1);
Â  Â  Â  Â  Â  saveUploads(uploads);
Â  Â  Â  Â  Â  // Actualizar el estado del dashboard despuÃ©s de eliminar
Â  Â  Â  Â  Â  updateUploadMeta();Â 
Â  Â  Â  Â  Â  openModalUploads(tipo);
Â  Â  Â  Â  });

Â  Â  Â  Â  actions.appendChild(openBtn);
Â  Â  Â  Â  actions.appendChild(delBtn);
Â  Â  Â  Â  card.appendChild(actions);

Â  Â  Â  Â  card.addEventListener("click", openInNew);

Â  Â  Â  Â  modalBody.appendChild(card);
Â  Â  Â  });
Â  Â  }

Â  Â  function closeModalUploads() {
Â  Â  Â  if (!uploadsModal) return;
Â  Â  Â  uploadsModal.style.display = "none";
Â  Â  }

Â  Â  if (modalClose) {
Â  Â  Â  modalClose.addEventListener("click", closeModalUploads);
Â  Â  }
Â  Â  if (uploadsModal) {
Â  Â  Â  uploadsModal.addEventListener("click", (ev) => {
Â  Â  Â  Â  if (ev.target === uploadsModal) closeModalUploads();
Â  Â  Â  });
Â  Â  }

Â  Â  // VISOR PRO -------------------------------------------------------------
Â  Â  const imageViewer = document.getElementById("imageViewer");
Â  Â  const imageViewerImg = document.getElementById("imageViewerImg");
Â  Â  const imageViewerClose = document.getElementById("imageViewerClose");

Â  Â  function openImageViewer(url, name) {
Â  Â  Â  if (!url || !imageViewer || !imageViewerImg) return;
Â  Â  Â  imageViewerImg.src = url;
Â  Â  Â  imageViewerImg.alt = name || "Foto subida";
Â  Â  Â  imageViewer.style.display = "flex";
Â  Â  }

Â  Â  function closeImageViewer() {
Â  Â  Â  if (!imageViewer || !imageViewerImg) return;
Â  Â  Â  imageViewer.style.display = "none";
Â  Â  Â  imageViewerImg.src = "";
Â  Â  }

Â  Â  if (imageViewerClose) {
Â  Â  Â  imageViewerClose.addEventListener("click", closeImageViewer);
Â  Â  }
Â  Â  if (imageViewer) {
Â  Â  Â  imageViewer.addEventListener("click", (ev) => {
Â  Â  Â  Â  if (ev.target === imageViewer) closeImageViewer();
Â  Â  Â  });
Â  Â  }
Â  Â  document.addEventListener("keydown", (ev) => {
Â  Â  Â  if (ev.key === "Escape") {
Â  Â  Â  Â  closeImageViewer();
Â  Â  Â  Â  closeModalUploads();
Â  Â  Â  }
Â  Â  });

Â  Â  /* ============================
Â  Â  	INICIALIZACIÃ“N & EVENTOS
Â  Â  	============================ */

Â  Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  // precio
Â  Â  Â  recalcPrice();
Â  Â  Â  const precioInput = document.getElementById("precioInput");
Â  Â  Â  if (precioInput) {
Â  Â  Â  Â  // Eventos para recalcular al cambiar o perder el foco del input
Â  Â  Â  Â  precioInput.addEventListener("input", recalcPrice);Â 
Â  Â  Â  Â  precioInput.addEventListener("change", recalcPrice);
Â  Â  Â  Â  precioInput.addEventListener("blur", recalcPrice);
Â  Â  Â  }
Â  Â  Â  const btnSim = document.getElementById("btnSimulacion");
Â  Â  Â  if (btnSim) btnSim.addEventListener("click", recalcPrice);

Â  Â  Â  // servicios
Â  Â  Â  serviciosEstado = loadServiciosEstado();
Â  Â  Â  renderServiciosDashboard();
Â  Â  Â  renderAgencyActiveServices(); // Renderizar los pills de la agencia

Â  Â  Â  const btnVerServicios = document.getElementById("btnVerServicios");
Â  Â  Â  if (btnVerServicios) {
Â  Â  Â  Â  btnVerServicios.addEventListener("click", () => {
Â  Â  Â  Â  Â  window.location.href = "servicios.html";
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  // agencias
Â  Â  Â  agenciesState = loadAgenciesState();
Â  Â  Â  renderAgencies();

Â  Â  Â  // uploads
Â  Â  Â  uploads = loadUploads();
Â  Â  Â  updateUploadMeta();

Â  Â  Â  // handlers uploads
Â  Â  Â  const dropFotos = document.getElementById("dropFotos");
Â  Â  Â  const dropDocs = document.getElementById("dropDocs");
Â  Â  Â  const fileFotos = document.getElementById("fileFotos");
Â  Â  Â  const fileDocs = document.getElementById("fileDocs");

Â  Â  Â  if (dropFotos && fileFotos) {
Â  Â  Â  Â  const openPickerFotos = () => fileFotos.click();
Â  Â  Â  Â  const btnSubirFotos = document.getElementById("btnSubirFotos");
Â  Â  Â  Â  if(btnSubirFotos) btnSubirFotos.addEventListener("click", openPickerFotos);
Â  Â  Â  Â Â 
Â  Â  Â  Â  dropFotos.addEventListener("click", openPickerFotos);

Â  Â  Â  Â  ["dragenter", "dragover"].forEach((evName) =>
Â  Â  Â  Â  Â  dropFotos.addEventListener(evName, (ev) => {
Â  Â  Â  Â  Â  Â  ev.preventDefault();
Â  Â  Â  Â  Â  Â  ev.stopPropagation();
Â  Â  Â  Â  Â  Â  dropFotos.classList.add("dragover");
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  );
Â  Â  Â  Â  ["dragleave", "drop"].forEach((evName) =>
Â  Â  Â  Â  Â  dropFotos.addEventListener(evName, (ev) => {
Â  Â  Â  Â  Â  Â  ev.preventDefault();
Â  Â  Â  Â  Â  Â  ev.stopPropagation();
Â  Â  Â  Â  Â  Â  dropFotos.classList.remove("dragover");
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  );
Â  Â  Â  Â  dropFotos.addEventListener("drop", (ev) => {
Â  Â  Â  Â  Â  const files = ev.dataTransfer.files;
Â  Â  Â  Â  Â  handleFiles(files, "fotos");
Â  Â  Â  Â  Â  dropFotos.classList.remove("dragover");
Â  Â  Â  Â  });
Â  Â  Â  Â  fileFotos.addEventListener("change", (ev) => {
Â  Â  Â  Â  Â  handleFiles(ev.target.files, "fotos");
Â  Â  Â  Â  Â  fileFotos.value = "";
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  if (dropDocs && fileDocs) {
Â  Â  Â  Â  const openPickerDocs = () => fileDocs.click();
Â  Â  Â  Â  const btnSubirDocs = document.getElementById("btnSubirDocs");
Â  Â  Â  Â  if(btnSubirDocs) btnSubirDocs.addEventListener("click", openPickerDocs);

Â  Â  Â  Â  dropDocs.addEventListener("click", openPickerDocs);

Â  Â  Â  Â  ["dragenter", "dragover"].forEach((evName) =>
Â  Â  Â  Â  Â  dropDocs.addEventListener(evName, (ev) => {
Â  Â  Â  Â  Â  Â  ev.preventDefault();
Â  Â  Â  Â  Â  Â  ev.stopPropagation();
Â  Â  Â  Â  Â  Â  dropDocs.classList.add("dragover");
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  );
Â  Â  Â  Â  ["dragleave", "drop"].forEach((evName) =>
Â  Â  Â  Â  Â  dropDocs.addEventListener(evName, (ev) => {
Â  Â  Â  Â  Â  Â  ev.preventDefault();
Â  Â  Â  Â  Â  Â  ev.stopPropagation();
Â  Â  Â  Â  Â  Â  dropDocs.classList.remove("dragover");
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  );
Â  Â  Â  Â  dropDocs.addEventListener("drop", (ev) => {
Â  Â  Â  Â  Â  const files = ev.dataTransfer.files;
Â  Â  Â  Â  Â  handleFiles(files, "docs");
Â  Â  Â  Â  Â  dropDocs.classList.remove("dragover");
Â  Â  Â  Â  });
Â  Â  Â  Â  fileDocs.addEventListener("change", (ev) => {
Â  Â  Â  Â  Â  handleFiles(ev.target.files, "docs");
Â  Â  Â  Â  Â  fileDocs.value = "";
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  // botones ver fotos/docs
Â  Â  Â  const btnVerFotos = document.getElementById("btnVerFotos");
Â  Â  Â  if (btnVerFotos) {
Â  Â  Â  Â  btnVerFotos.addEventListener("click", () => openModalUploads("fotos"));
Â  Â  Â  }
Â  Â  Â  const btnVerDocs = document.getElementById("btnVerDocs");
Â  Â  Â  if (btnVerDocs) {
Â  Â  Â  Â  btnVerDocs.addEventListener("click", () => openModalUploads("docs"));
Â  Â  Â  }

Â  Â  Â  // notificaciones
Â  Â  Â  const btnNotif = document.getElementById("btnNotif");
Â  Â  Â  if (btnNotif) {
Â  Â  Â  Â  btnNotif.addEventListener("click", () => {
Â  Â  Â  Â  Â  // solo centra el scroll arriba del histÃ³rico
Â  Â  Â  Â  Â  const recent = document.getElementById("recentList");
Â  Â  Â  Â  Â  if (recent) recent.scrollTop = 0;
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  // render log inicial
Â  Â  Â  renderLog();
Â  Â  });
Â  </script>
</body>
</html>
