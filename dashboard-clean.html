    <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Panamove 7.0 – Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-body: #020617;
      --bg-panel: #020617;
      --bg-card: #020617;
      --bg-card-soft: #0b1120;
      --border-soft: rgba(148, 163, 184, 0.35);
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.18);
      --green: #4ade80;
      --green-soft: rgba(34, 197, 94, 0.18);
      --danger: #f97373;
      --shadow-card: 0 18px 45px rgba(15, 23, 42, 0.9);
      --radius-lg: 1.4rem;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top left, #020617 0, #020617 55%, #020617 100%);
      color: var(--text-main);
    }

    body {
      display: flex;
      min-height: 100vh;
    }

    /* ===== SIDEBAR ===== */

    .sidebar {
      width: 230px;
      background: radial-gradient(circle at top left, #22d3ee 0, #0f172a 42%, #020617 100%);
      color: #e5e7eb;
      padding: 1.4rem 1.2rem 1.4rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      border-right: 1px solid rgba(15, 23, 42, 0.9);
    }

    .logo-row {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .logo-circle {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: conic-gradient(from 180deg, #22c55e, #22d3ee, #6366f1, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #020617;
      font-weight: 700;
      font-size: 0.85rem;
      box-shadow: 0 0 25px rgba(56, 189, 248, 0.7);
    }

    .logo-text-main {
      font-weight: 700;
      font-size: 1.1rem;
      letter-spacing: 0.02em;
    }

    .logo-text-sub {
      font-size: 0.75rem;
      color: rgba(226, 232, 240, 0.85);
      line-height: 1.2;
    }

    .sidebar-nav {
      margin-top: 1.4rem;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.55rem 0.75rem;
      border-radius: 0.9rem;
      font-size: 0.88rem;
      color: rgba(226, 232, 240, 0.9);
      cursor: pointer;
      border: 1px solid transparent;
    }

    .nav-item span.icon-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.8);
    }

    .nav-item.active {
      background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.2), rgba(15, 23, 42, 0.9));
      border-color: rgba(148, 163, 184, 0.5);
      box-shadow: 0 12px 35px rgba(15, 23, 42, 0.9);
    }

    .nav-item.active span.icon-dot {
      background: #4ade80;
      box-shadow: 0 0 12px rgba(74, 222, 128, 0.9);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 0.75rem;
      color: rgba(148, 163, 184, 0.9);
    }

    /* ===== MAIN LAYOUT ===== */

    .main {
      flex: 1;
      padding: 1.4rem 2rem 2rem;
      background: radial-gradient(circle at top left, #020617 0, #020617 55%, #020617 100%);
      overflow-x: hidden;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.4rem;
    }

    .top-left {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }

    .page-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .page-subtitle {
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .campaign-pill-row {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-top: 0.4rem;
      flex-wrap: wrap;
    }

    .pill {
      border-radius: var(--radius-pill);
      padding: 0.3rem 0.8rem;
      font-size: 0.8rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.8);
    }

    .pill-strong {
      border-color: rgba(248, 250, 252, 0.5);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.25), rgba(15, 23, 42, 0.9));
      font-weight: 600;
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .btn-ghost {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 0.8rem;
      padding: 0.4rem 0.9rem;
      cursor: pointer;
    }

    .btn-primary-top {
      border-radius: var(--radius-pill);
      border: none;
      background: linear-gradient(135deg, #4ade80, #22c55e);
      color: #020617;
      font-size: 0.8rem;
      font-weight: 600;
      padding: 0.45rem 1rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      box-shadow: 0 12px 35px rgba(22, 163, 74, 0.6);
    }

    /* ===== GRID GENERAL ===== */

    .grid {
      display: grid;
      grid-template-columns: repeat(12, minmax(0, 1fr));
      gap: 1.1rem;
    }

    .card {
      background: radial-gradient(
          circle at top left,
          rgba(15, 23, 42, 0.95),
          rgba(15, 23, 42, 1)
        );
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      padding: 1rem 1.1rem;
      box-shadow: var(--shadow-card);
    }

    .card h3 {
      margin: 0 0 0.3rem;
      font-size: 0.95rem;
      font-weight: 600;
    }

    .card p {
      margin: 0;
    }

    .card-big-number {
      font-size: 1.8rem;
      font-weight: 700;
      margin-top: 0.3rem;
    }

    .card-col-4 {
      grid-column: span 4;
    }

    .card-col-3 {
      grid-column: span 3;
    }

    .card-col-6 {
      grid-column: span 6;
    }

    .card-col-8 {
      grid-column: span 8;
    }

    .card-col-12 {
      grid-column: span 12;
    }

    .muted {
      color: var(--text-soft);
      font-size: 0.85rem;
    }

    .spacer-vert {
      height: 1rem;
    }

    /* ===== CAJA COSTES / PRECIO ===== */

    .price-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.7rem;
    }

    .price-left {
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .price-input-wrap {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      border-radius: var(--radius-pill);
      padding: 0.22rem 0.5rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .price-input-wrap label {
      font-size: 0.78rem;
      color: var(--text-soft);
    }

    .price-input-wrap input {
      border: none;
      background: transparent;
      color: #f9fafb;
      width: 100px;
      text-align: right;
      font-size: 0.85rem;
    }

    .price-input-wrap input:focus {
      outline: none;
    }

    .cost-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.83rem;
    }

    .cost-table tr + tr td {
      border-top: 1px dashed rgba(51, 65, 85, 0.9);
    }

    .cost-table td {
      padding: 0.32rem 0;
    }

    .cost-label {
      color: var(--text-soft);
    }

    .cost-value {
      text-align: right;
    }

    .cost-highlight {
      color: #facc15;
      font-weight: 600;
    }

    .cost-negative {
      color: #bfdbfe;
      font-weight: 600;
    }

    .badge-soft {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.2rem 0.65rem;
      border-radius: var(--radius-pill);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 0.78rem;
      color: var(--text-soft);
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
    }

    /* ===== ÚLTIMA PROPIEDAD / CHIPS ===== */

    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.55rem;
    }

    .chip {
      border-radius: var(--radius-pill);
      padding: 0.22rem 0.7rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(51, 65, 85, 0.85);
      font-size: 0.78rem;
      color: #e5e7eb;
    }

    .card-body-text {
      margin-top: 0.55rem;
      font-size: 0.86rem;
      color: var(--text-soft);
    }

    /* ===== FOTOS / DOCUMENTACIÓN ===== */

    .upload-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
      margin-top: 0.6rem;
    }

    .upload-zone {
      border-radius: 1.1rem;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.85);
      padding: 0.85rem;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      align-items: stretch;
      justify-content: space-between;
      min-height: 120px;
    }

    .upload-title {
      font-size: 0.88rem;
      font-weight: 600;
    }

    .upload-subtitle {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .upload-actions-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .btn-upload {
      border-radius: var(--radius-pill);
      border: none;
      background: var(--accent-soft);
      color: #e0f2fe;
      padding: 0.4rem 0.9rem;
      font-size: 0.8rem;
      cursor: pointer;
    }

    .upload-counter {
      font-size: 0.78rem;
      color: var(--text-soft);
    }

    input[type="file"] {
      display: none;
    }

    /* ===== ACCIONES RECIENTES ===== */

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
      margin-top: 0.4rem;
      font-size: 0.82rem;
    }

    .timeline-item {
      display: flex;
      align-items: flex-start;
      gap: 0.4rem;
    }

    .timeline-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      margin-top: 0.3rem;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }

    .timeline-text-main {
      color: #e5e7eb;
    }

    .timeline-text-sub {
      color: var(--text-soft);
      font-size: 0.78rem;
    }

    /* ===== BARRA ESTADO SERVICIOS ACTIVADOS ===== */

    .status-bar {
      margin-top: 0.8rem;
      border-radius: var(--radius-pill);
      padding: 0.4rem 0.8rem;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.85);
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.55rem;
      color: #e5e7eb;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.95);
    }

    /* ===== SERVICIOS ACTIVADOS (LISTA) ===== */

    .activated-list {
      margin-top: 0.4rem;
      font-size: 0.83rem;
      color: var(--text-soft);
    }

    .activated-list ul {
      padding-left: 1.1rem;
      margin: 0.2rem 0 0;
    }

    /* ===== SERVICIOS DISPONIBLES ===== */

    .filters-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin: 0.6rem 0 0.9rem;
      font-size: 0.8rem;
    }

    .filter-pill {
      border-radius: var(--radius-pill);
      padding: 0.2rem 0.75rem;
      border: 1px solid rgba(55, 65, 81, 0.85);
      background: rgba(15, 23, 42, 0.9);
      cursor: pointer;
      color: var(--text-soft);
    }

    .filter-pill.active {
      background: rgba(37, 99, 235, 0.18);
      border-color: #60a5fa;
      color: #bfdbfe;
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }

    .service-card {
      border-radius: 1.1rem;
      padding: 0.9rem 0.9rem 0.85rem;
      background: radial-gradient(
          circle at top left,
          rgba(59, 130, 246, 0.18),
          transparent 55%
        ),
        rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      font-size: 0.83rem;
    }

    .service-title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .service-price {
      font-weight: 600;
      margin-top: 0.1rem;
    }

    .service-desc {
      color: var(--text-soft);
    }

    .service-btn-row {
      margin-top: 0.4rem;
    }

    .service-btn {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 0.78rem;
      padding: 0.35rem 0.85rem;
      cursor: pointer;
    }

    .service-btn.active {
      background: linear-gradient(135deg, #4ade80, #22c55e);
      border-color: transparent;
      color: #020617;
      font-weight: 600;
    }

    /* ===== AGENCIAS INTERESADAS ===== */

    .agencies-card {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .card-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1rem;
    }

    .card-subtitle {
      margin-top: 0.25rem;
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .agency-badge {
      padding: 0.35rem 0.9rem;
      border-radius: var(--radius-pill);
      background: rgba(148, 163, 184, 0.08);
      color: #e5e7eb;
      font-size: 0.78rem;
      white-space: nowrap;
    }

    .agency-empty-title {
      font-size: 0.95rem;
      margin-bottom: 0.25rem;
      color: #e5e7eb;
    }

    .agency-empty-text {
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .agency-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 0.9rem;
    }

    .agency-item {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      padding: 0.9rem 1rem;
      border-radius: 1rem;
      background: radial-gradient(
          circle at top left,
          rgba(59, 130, 246, 0.25),
          transparent 55%
        ),
        rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .agency-logo-wrap {
      width: 42px;
      height: 42px;
      border-radius: 999px;
      background: linear-gradient(135deg, #4ade80, #22d3ee);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #020617;
      font-weight: 700;
      font-size: 0.9rem;
      overflow: hidden;
    }

    .agency-logo-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .agency-info-main {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .agency-name {
      font-size: 0.95rem;
      font-weight: 600;
      color: #f9fafb;
    }

    .agency-tagline {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .agency-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      margin-top: 0.25rem;
      padding: 0.18rem 0.6rem;
      border-radius: var(--radius-pill);
      background: rgba(34, 197, 94, 0.15);
      color: #bbf7d0;
      font-size: 0.75rem;
    }

    .agency-cta-btn {
      margin-top: 0.3rem;
      align-self: flex-start;
      border-radius: var(--radius-pill);
      padding: 0.5rem 1.2rem;
      background: linear-gradient(135deg, #4ade80, #22c55e);
      border: none;
      color: #020617;
      font-size: 0.82rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      box-shadow: 0 12px 35px rgba(22, 163, 74, 0.6);
    }

    .agency-form {
      margin-top: 0.75rem;
      padding: 0.9rem 1rem;
      border-radius: 1rem;
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed rgba(148, 163, 184, 0.55);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .agency-form-row {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .agency-form-row label {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .agency-form-row input {
      border-radius: 0.7rem;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: #020617;
      color: #e5e7eb;
      padding: 0.45rem 0.6rem;
      font-size: 0.85rem;
    }

    .agency-form-row input:focus {
      outline: none;
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .agency-form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
    }

    .btn-secondary,
    .btn-primary {
      border-radius: var(--radius-pill);
      padding: 0.45rem 0.9rem;
      font-size: 0.8rem;
      border: none;
      cursor: pointer;
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .btn-secondary:hover {
      background: rgba(15, 23, 42, 1);
    }

    .btn-primary {
      background: linear-gradient(135deg, #4ade80, #22c55e);
      color: #020617;
      font-weight: 600;
    }

    .btn-primary:hover {
      filter: brightness(1.07);
    }

    .agency-form-hint {
      font-size: 0.75rem;
      color: var(--text-soft);
    }

    /* ===== RESPONSIVE ===== */

    @media (max-width: 960px) {
      body {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
      }

      .sidebar-nav {
        flex-direction: row;
        flex-wrap: wrap;
      }

      .main {
        padding: 1.1rem 1rem 1.6rem;
      }

      .grid {
        grid-template-columns: repeat(6, minmax(0, 1fr));
      }

      .card-col-4 {
        grid-column: span 6;
      }

      .card-col-3 {
        grid-column: span 3;
      }

      .card-col-6,
      .card-col-8,
      .card-col-12 {
        grid-column: span 6;
      }

      .upload-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo-row">
      <div class="logo-circle">P7</div>
      <div>
        <div class="logo-text-main">Panamove 7.0</div>
        <div class="logo-text-sub">
          Propietarios, agencias y difusores<br />
          en un mismo panel.
        </div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-item active">
        <span class="icon-dot"></span>
        Dashboard
      </div>
      <div class="nav-item">
        <span class="icon-dot"></span>
        Propiedades
      </div>
      <div class="nav-item">
        <span class="icon-dot"></span>
        Clientes
      </div>
      <div class="nav-item">
        <span class="icon-dot"></span>
        Difusores
      </div>
      <div class="nav-item">
        <span class="icon-dot"></span>
        Auditoría
      </div>
      <div class="nav-item">
        <span class="icon-dot"></span>
        Configuración
      </div>
    </nav>

    <div class="sidebar-footer">
      Sistema 7.0 · Ser más inteligente que la inteligencia.
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- TOP BAR -->
    <div class="top-bar">
      <div class="top-left">
        <div class="page-title">Dashboard</div>
        <div class="page-subtitle">
          Resumen rápido de tu campaña real dentro del sistema 7.0.
        </div>
        <div class="campaign-pill-row">
          <span class="pill pill-strong">Campaña activa – Ático Blue Sunset</span>
          <span class="pill">La Duquesa · Manilva · Costa del Sol</span>
        </div>
      </div>
      <div class="top-right">
        <button class="btn-ghost">Ver campaña detallada</button>
        <button class="btn-primary-top">Abrir campaña 7.0 ⤴</button>
      </div>
    </div>

    <!-- GRID PRINCIPAL -->
    <div class="grid">
      <!-- Propiedades activas -->
      <section class="card card-col-4">
        <h3>Propiedades activas</h3>
        <p class="muted">Actualmente dentro del sistema 7.0.</p>
        <div class="card-big-number" id="active-properties">1</div>
        <div class="badge-soft" style="margin-top:0.4rem;">
          <span class="badge-dot"></span> Sistema 7.0
        </div>
      </section>

      <!-- Ventas del mes -->
      <section class="card card-col-4">
        <h3>Ventas del mes (objetivo)</h3>
        <p class="muted">Incluye operaciones en curso + previsiones.</p>
        <div class="card-big-number" id="month-sales">1 venta</div>
        <p class="muted" style="margin-top:0.4rem;">
          Objetivo: cerrar la operación del ático con plusvalía educativa y
          comisiones alineadas.
        </p>
      </section>

      <!-- AGENCIAS INTERESADAS -->
      <section class="card card-col-4 agencies-card">
        <div class="card-header-row">
          <div>
            <h3>Contactos cualificados</h3>
            <p class="card-subtitle">
              Agencias interesadas en asumir esta campaña y correr con los gastos.
            </p>
          </div>
          <div class="agency-badge" id="agency-count">0 agencias</div>
        </div>

        <div id="agencies-empty">
          <p class="agency-empty-title">Todavía no hay agencias interesadas.</p>
          <p class="agency-empty-text">
            Cuando una agencia pulse <strong>“Soy agencia — Quiero gestionar esta campaña”</strong>,
            aparecerá aquí con su nombre y logo para que el propietario decida.
          </p>
        </div>

        <div id="agencies-list" class="agency-list" style="display:none;"></div>

        <button class="agency-cta-btn" type="button" onclick="showAgencyForm()">
          Soy agencia — Quiero gestionar esta campaña
        </button>

        <div id="agency-form" class="agency-form" style="display:none;">
          <div class="agency-form-row">
            <label for="agency-name">Nombre de la agencia</label>
            <input id="agency-name" type="text" placeholder="Ej. Bernabeu Realty" />
          </div>
          <div class="agency-form-row">
            <label for="agency-logo">URL del logo (opcional)</label>
            <input id="agency-logo" type="url" placeholder="https://..." />
          </div>
          <div class="agency-form-actions">
            <button type="button" class="btn-secondary" onclick="hideAgencyForm()">Cancelar</button>
            <button type="button" class="btn-primary" onclick="registerAgency()">Confirmar interés</button>
          </div>
          <p class="agency-form-hint">
            Al confirmar, el propietario verá que estás dispuesto a correr con los gastos
            para vender lo antes posible.
          </p>
        </div>
      </section>

      <!-- Caja de coste / precio propiedad -->
      <section class="card card-col-6">
        <div class="price-header">
          <div class="price-left">
            <strong>Precio de la propiedad</strong><br />
            <span class="muted">Simulación rápida de costes y comisiones.</span>
          </div>
          <div class="price-input-wrap">
            <label for="price-input">Introduce el precio:</label>
            <input
              id="price-input"
              type="number"
              min="0"
              step="1000"
              value="545000"
              oninput="recalculateCosts()"
            />
          </div>
        </div>

        <table class="cost-table">
          <tr>
            <td class="cost-label">Total servicios activados (sin IVA):</td>
            <td class="cost-value" id="services-total">0 €</td>
          </tr>
          <tr>
            <td class="cost-label">IVA servicios 21 %:</td>
            <td class="cost-value" id="services-iva">0 €</td>
          </tr>
          <tr>
            <td class="cost-label">Comisión 3 % gestión:</td>
            <td class="cost-value" id="commission">0 €</td>
          </tr>
          <tr>
            <td class="cost-label">IVA 21 % comisión:</td>
            <td class="cost-value" id="commission-iva">0 €</td>
          </tr>
          <tr>
            <td class="cost-label">Total costes estimados servicios + comisión (con IVA):</td>
            <td class="cost-value cost-highlight" id="total-costs">0 €</td>
          </tr>
          <tr>
            <td class="cost-label">
              Neto para el propietario (antes de plusvalía municipal, IRPF u otros):
            </td>
            <td class="cost-value cost-negative" id="net-owner">0 €</td>
          </tr>
        </table>
      </section>

      <!-- Fotos y documentación -->
      <section class="card card-col-6">
        <h3>Fotos y documentación</h3>
        <p class="muted">
          Gestiona las fotos HD, planos, escrituras y toda la documentación desde un único panel.
        </p>

        <div class="upload-grid">
          <div class="upload-zone">
            <div>
              <div class="upload-title">Subir fotos de la vivienda</div>
              <div class="upload-subtitle">
                Arrastra y suelta aquí o usa el botón para elegir archivos.
              </div>
            </div>
            <div class="upload-actions-row">
              <button
                class="btn-upload"
                type="button"
                onclick="document.getElementById('photos-input').click()"
              >
                Subir / arrastrar fotos
              </button>
              <span class="upload-counter" id="photos-counter">0 fotos subidas</span>
            </div>
            <input
              id="photos-input"
              type="file"
              accept="image/*"
              multiple
              onchange="updatePhotoCounter()"
            />
          </div>

          <div class="upload-zone">
            <div>
              <div class="upload-title">Subir documentación</div>
              <div class="upload-subtitle">
                Contrato de arras, nota simple, escrituras, certificados, etc.
              </div>
            </div>
            <div class="upload-actions-row">
              <button
                class="btn-upload"
                type="button"
                onclick="document.getElementById('docs-input').click()"
              >
                Subir / arrastrar documentación
              </button>
              <span class="upload-counter" id="docs-counter">0 documentos</span>
            </div>
            <input
              id="docs-input"
              type="file"
              multiple
              onchange="updateDocsCounter()"
            />
          </div>
        </div>
      </section>

      <!-- Última propiedad -->
      <section class="card card-col-8">
        <h3>Última propiedad en campaña</h3>
        <p class="muted">Ático Blue Sunset – La Duquesa · Manilva.</p>

        <div class="chips-row">
          <span class="chip">2 dorm · 2 baños</span>
          <span class="chip">134 m² construidos aprox.</span>
          <span class="chip">4 balcones panorámicos Velux</span>
          <span class="chip">Vistas a Málaga · Cádiz · África · Gibraltar</span>
        </div>

        <p class="card-body-text">
          Este ático es la pieza clave del método 7.0. Desde aquí solo ves el
          resumen; el resto se controla en el panel completo.
        </p>
      </section>

      <!-- Acciones recientes -->
      <section class="card card-col-4">
        <h3>Acciones recientes</h3>
        <p class="muted">Últimos movimientos vinculados a esta campaña.</p>

        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div>
              <div class="timeline-text-main">
                Documento de arras cargado en el sistema.
              </div>
              <div class="timeline-text-sub">El propietario ha subido el contrato de arras.</div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div>
              <div class="timeline-text-main">
                Servicios activados para la campaña del ático.
              </div>
              <div class="timeline-text-sub">
                Fotos PRO, vídeo + dron y home staging listos para coordinar.
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div>
              <div class="timeline-text-main">
                Nuevo contacto interesado (ejemplo).
              </div>
              <div class="timeline-text-sub">
                Cuando registres clientes reales aparecerán aquí.
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div>
              <div class="timeline-text-main">Panel 7.0 preparado.</div>
              <div class="timeline-text-sub">
                Todo listo para empezar a documentar cada movimiento.
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Servicios activados -->
      <section class="card card-col-6">
        <h3>Servicios activados por el propietario</h3>
        <p class="muted">
          Qué está activo, qué falta por activar y qué servicios ya han sido realizados.
        </p>

        <div class="status-bar">
          <div class="status-dot"></div>
          <span id="status-text">
            De momento no hay servicios activados. Activa alguno en la sección inferior.
          </span>
        </div>

        <div class="activated-list">
          <strong>Detalle de acciones activadas:</strong>
          <ul id="activated-list">
            <!-- se rellena con JS -->
          </ul>
        </div>
      </section>

      <!-- Servicios disponibles -->
      <section class="card card-col-6">
        <h3>Servicios disponibles (tarifas ejemplo)</h3>
        <div class="filters-row">
          <button class="filter-pill active" type="button">Todos</button>
          <button class="filter-pill" type="button">1–4</button>
          <button class="filter-pill" type="button">5–8</button>
          <button class="filter-pill" type="button">9–12</button>
          <button class="filter-pill" type="button">13–16</button>
          <button class="filter-pill" type="button">17–20</button>
          <button class="filter-pill" type="button">21–24</button>
          <button class="filter-pill" type="button">25–28</button>
        </div>

        <div class="services-grid" id="services-grid">
          <!-- services se generan por JS -->
        </div>
      </section>
    </div>
  </main>

  <!-- JS -->
  <script>
    /* ===== ESTADO Y SERVICIOS ===== */

    const services = [
      {
        id: "fotos-pro",
        name: "Fotos PRO",
        price: 450,
        description: "Fotógrafo especializado inmobiliario.",
      },
      {
        id: "video-dron",
        name: "Vídeo + dron",
        price: 450,
        description: "Recorrido interior + vistas aéreas.",
      },
      {
        id: "home-staging",
        name: "Home staging",
        price: 900,
        description: "Mejora estética sin reformas pesadas.",
      },
      {
        id: "blogger-internacional",
        name: "Blogger internacional",
        price: 3000,
        description: "Historia real del inmueble en otro país.",
      },
    ];

    const activeServices = new Set();

    function formatCurrency(value) {
      return (
        value.toLocaleString("es-ES", {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }) + " €"
      );
    }

    function renderServices() {
      const container = document.getElementById("services-grid");
      container.innerHTML = "";
      services.forEach((svc) => {
        const isActive = activeServices.has(svc.id);
        const card = document.createElement("div");
        card.className = "service-card";
        card.innerHTML = `
          <div class="service-title">${svc.name}</div>
          <div class="service-price">${formatCurrency(svc.price)} · pago a éxito</div>
          <div class="service-desc">${svc.description}</div>
          <div class="service-btn-row">
            <button
              type="button"
              class="service-btn ${isActive ? "active" : ""}"
              onclick="toggleService('${svc.id}')"
            >
              ${isActive ? "Servicio activado" : "Activar este servicio"}
            </button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function recalculateCosts() {
      const priceInput = document.getElementById("price-input");
      const price = Number(priceInput.value || 0);

      let servicesTotal = 0;
      services.forEach((svc) => {
        if (activeServices.has(svc.id)) servicesTotal += svc.price;
      });

      const servicesIVA = servicesTotal * 0.21;
      const commission = price * 0.03;
      const commissionIVA = commission * 0.21;
      const totalCosts = servicesTotal + servicesIVA + commission + commissionIVA;
      const netOwner = price - totalCosts;

      document.getElementById("services-total").textContent = formatCurrency(
        servicesTotal
      );
      document.getElementById("services-iva").textContent = formatCurrency(
        servicesIVA
      );
      document.getElementById("commission").textContent = formatCurrency(
        commission
      );
      document.getElementById("commission-iva").textContent = formatCurrency(
        commissionIVA
      );
      document.getElementById("total-costs").textContent =
        formatCurrency(totalCosts);
      document.getElementById("net-owner").textContent = formatCurrency(
        netOwner
      );
    }

    function updateActivatedUI() {
      const statusText = document.getElementById("status-text");
      const listEl = document.getElementById("activated-list");
      listEl.innerHTML = "";

      if (activeServices.size === 0) {
        statusText.textContent =
          "De momento no hay servicios activados. Activa alguno en la sección inferior.";
        return;
      }

      const names = services
        .filter((svc) => activeServices.has(svc.id))
        .map((svc) => svc.name);

      statusText.textContent = `Servicios activos: ${names.join(", ")}.`;

      services.forEach((svc) => {
        if (activeServices.has(svc.id)) {
          const li = document.createElement("li");
          li.textContent = `${svc.name} activado (${formatCurrency(
            svc.price
          )} sin IVA).`;
          listEl.appendChild(li);
        }
      });
    }

    function toggleService(id) {
      if (activeServices.has(id)) {
        activeServices.delete(id);
      } else {
        activeServices.add(id);
      }
      renderServices();
      updateActivatedUI();
      recalculateCosts();
    }

    /* ===== FOTOS / DOCS ===== */

    function updatePhotoCounter() {
      const input = document.getElementById("photos-input");
      const counter = document.getElementById("photos-counter");
      const count = input.files.length;
      counter.textContent =
        count === 1 ? "1 foto subida" : `${count} fotos subidas`;
    }

    function updateDocsCounter() {
      const input = document.getElementById("docs-input");
      const counter = document.getElementById("docs-counter");
      const count = input.files.length;
      counter.textContent =
        count === 1 ? "1 documento" : `${count} documentos`;
    }

    /* ===== AGENCIAS INTERESADAS ===== */

    const agencies = [];

    function initialsFromName(name) {
      return name
        .split(" ")
        .filter(Boolean)
        .map((p) => p[0].toUpperCase())
        .slice(0, 2)
        .join("");
    }

    function renderAgencies() {
      const listEl = document.getElementById("agencies-list");
      const emptyEl = document.getElementById("agencies-empty");
      const countEl = document.getElementById("agency-count");

      if (!listEl || !emptyEl || !countEl) return;

      if (agencies.length === 0) {
        emptyEl.style.display = "block";
        listEl.style.display = "none";
        countEl.textContent = "0 agencias";
        return;
      }

      emptyEl.style.display = "none";
      listEl.style.display = "grid";

      countEl.textContent =
        agencies.length === 1
          ? "1 agencia interesada"
          : `${agencies.length} agencias interesadas`;

      listEl.innerHTML = "";
      agencies.forEach((agency) => {
        const item = document.createElement("div");
        item.className = "agency-item";
        const hasLogo = agency.logo && agency.logo.trim() !== "";
        item.innerHTML = `
          <div class="agency-logo-wrap">
            ${
              hasLogo
                ? `<img src="${agency.logo}" alt="${agency.name}" />`
                : `<span>${initialsFromName(agency.name)}</span>`
            }
          </div>
          <div class="agency-info-main">
            <div class="agency-name">${agency.name}</div>
            <div class="agency-tagline">
              Dispuesta a correr con los gastos para vender lo antes posible.
            </div>
            <span class="agency-pill">✓ Quiere gestionar esta campaña</span>
          </div>
        `;
        listEl.appendChild(item);
      });
    }

    function showAgencyForm() {
      const form = document.getElementById("agency-form");
      if (!form) return;
      form.style.display = "flex";
      const nameInput = document.getElementById("agency-name");
      if (nameInput) nameInput.focus();
    }

    function hideAgencyForm() {
      const form = document.getElementById("agency-form");
      if (!form) return;
      form.style.display = "none";
    }

    function registerAgency() {
      const nameInput = document.getElementById("agency-name");
      const logoInput = document.getElementById("agency-logo");
      if (!nameInput || !logoInput) return;

      const name = nameInput.value.trim();
      const logo = logoInput.value.trim();

      if (!name) {
        alert("Por favor, indica el nombre de la agencia.");
        return;
      }

      agencies.push({ name, logo });

      nameInput.value = "";
      logoInput.value = "";

      hideAgencyForm();
      renderAgencies();
    }

    /* ===== INIT ===== */

    // Puedes arrancar con algún servicio activo de ejemplo:
    activeServices.add("fotos-pro");
    activeServices.add("home-staging");

    // Y también, si quieres, con una agencia de ejemplo:
    // agencies.push({ name: "Bernabeu Realty", logo: "" });

    renderServices();
    updateActivatedUI();
    recalculateCosts();
    renderAgencies();
  </script>
</body>
</html>
